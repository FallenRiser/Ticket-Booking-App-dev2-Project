(function(){"use strict";var e={6171:function(e,t,a){var s=a(9242),r=a(3396);const o={id:"app"},i={id:"page-container"},n=(0,r._)("div",{id:"content-wrap"},null,-1);function l(e,t,a,s,l,c){const d=(0,r.up)("Navbar"),m=(0,r.up)("router-view"),u=(0,r.up)("Footer");return(0,r.wg)(),(0,r.iD)("div",o,[(0,r._)("div",i,[(0,r.Wm)(d),(0,r.Wm)(m),n,(0,r.Wm)(u)])])}var c=a(7139);const d={class:"navbar navbar-expand-lg",style:{"background-color":"#020024",color:"white"}},m={class:"container-fluid"},u=(0,r._)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,r._)("span",{class:"navbar-toggler-icon"})],-1),p={class:"collapse navbar-collapse",id:"navbarNav"},h={class:"navbar-nav"},g={class:"nav-item"},_={class:"nav-item"},f={key:0,class:"nav-item"},y={key:1,class:"nav-item"},b={key:2,class:"nav-item"},v={key:3,class:"nav-item"},w={class:"nav-item"},k=(0,r._)("button",{class:"btn btn-info"},[(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-search",viewBox:"0 0 16 16"},[(0,r._)("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"})])],-1),S={key:0,class:"navbar-item"};function D(e,t,a,s,o,i){const n=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("nav",d,[(0,r._)("div",m,[(0,r.Wm)(n,{to:"/",style:{color:"yellow","font-family":"'showtime'","font-size":"25px"},class:"navbar-brand"},{default:(0,r.w5)((()=>[(0,r.Uk)("Ticket_Show")])),_:1}),u,(0,r._)("div",p,[(0,r._)("ul",h,[(0,r._)("li",g,[(0,r.Wm)(n,{to:"/all-movies",style:{color:"white"},class:"nav-link"},{default:(0,r.w5)((()=>[(0,r.Uk)("All Movies")])),_:1})]),(0,r._)("li",_,[(0,r.Wm)(n,{to:"/all-theatres",style:{color:"white"},class:"nav-link"},{default:(0,r.w5)((()=>[(0,r.Uk)("All Theatres")])),_:1})]),e.isAuthenticated?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("li",f,[(0,r.Wm)(n,{to:"/login",style:{color:"white"},class:"nav-link"},{default:(0,r.w5)((()=>[(0,r.Uk)("Login")])),_:1})])),i.adminparts?((0,r.wg)(),(0,r.iD)("li",y,[i.adminparts?((0,r.wg)(),(0,r.j4)(n,{key:0,to:"/add-theatre",style:{color:"white"},class:"nav-link"},{default:(0,r.w5)((()=>[(0,r.Uk)("Add Theatre")])),_:1})):(0,r.kq)("",!0)])):(0,r.kq)("",!0),i.adminparts?((0,r.wg)(),(0,r.iD)("li",b,[i.adminparts?((0,r.wg)(),(0,r.j4)(n,{key:0,to:"/add-movie",style:{color:"white"},class:"nav-link"},{default:(0,r.w5)((()=>[(0,r.Uk)("Add Movie")])),_:1})):(0,r.kq)("",!0)])):(0,r.kq)("",!0),e.isAuthenticated?((0,r.wg)(),(0,r.iD)("li",v,[(0,r.Wm)(n,{to:"/logout",style:{color:"white"},onClick:t[0]||(t[0]=e=>i.handleLogout()),class:"nav-link"},{default:(0,r.w5)((()=>[(0,r.Uk)("Logout")])),_:1})])):(0,r.kq)("",!0),(0,r._)("li",w,[(0,r.Wm)(n,{to:"/search"},{default:(0,r.w5)((()=>[k])),_:1})])])]),e.isAuthenticated?((0,r.wg)(),(0,r.iD)("div",S,[(0,r.Wm)(n,{to:{name:"profile",params:{userid:e.user_id}},class:"nav-link"},{default:(0,r.w5)((()=>[(0,r.Uk)("Hello, "+(0,c.zw)(e.user_name),1)])),_:1},8,["to"])])):(0,r.kq)("",!0)])])}a(7658);var T=a(65),U={computed:{...(0,T.Se)(["isAuthenticated","role","user_name","user_id"]),adminparts(){return this.isAuthenticated&&"admin"===this.role}},methods:{...(0,T.OI)(["logout"]),handleLogout(){this.logout(),this.$router.push({name:"register"})}}},C=a(89);const x=(0,C.Z)(U,[["render",D]]);var N=x;const $=e=>((0,r.dD)("data-v-7977bafa"),e=e(),(0,r.Cn)(),e),z={class:"footer"},A=$((()=>(0,r._)("div",{class:"footer-content"},[(0,r._)("div",{class:"left"},[(0,r._)("span",null,"Â© 2023")]),(0,r._)("div",{class:"right"},[(0,r._)("p",null,"21f1000503@ds.study.iitm.ac.in")])],-1))),I=[A];function q(e,t){return(0,r.wg)(),(0,r.iD)("footer",z,I)}const O={},V=(0,C.Z)(O,[["render",q],["__scopeId","data-v-7977bafa"]]);var M=V,J={name:"App",components:{Navbar:N,Footer:M}};const P=(0,C.Z)(J,[["render",l]]);var Z=P,E=(a(6744),a(2483));const R=e=>((0,r.dD)("data-v-28bca37f"),e=e(),(0,r.Cn)(),e),B={class:"container"},F=R((()=>(0,r._)("h1",{style:{"font-family":"'bluto'",color:"#ffffff"}},"Welcome to Ticket Show!",-1))),L=R((()=>(0,r._)("h2",null,"Latest Movies",-1))),j={class:"movie-grid"},H=["src","alt"];function W(e,t,a,s,o,i){const n=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",B,[F,L,(0,r._)("div",j,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.displayedMovies,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e.id,class:"movie-item"},[(0,r.Wm)(n,{to:`/movie/${e.id}`},{default:(0,r.w5)((()=>[(0,r._)("img",{src:`http://127.0.0.1:5000/static/img/Movies/${e.boxart}`,alt:e.title},null,8,H),(0,r._)("p",null,(0,c.zw)(e.title),1)])),_:2},1032,["to"])])))),128))])])}var Y=a(4161),K={data(){return{movies:[],displayedMovies:[]}},async mounted(){await this.fetchLatestMovies()},methods:{async fetchLatestMovies(){try{const e=await Y.Z.post("http://127.0.0.1:5000/api/movie-home");this.movies=e.data,this.displayedMovies=this.movies,console.log(this.displayedMovies)}catch(e){console.error("Error fetching latest movies:",e)}}}};const G=(0,C.Z)(K,[["render",W],["__scopeId","data-v-28bca37f"]]);var Q=G;const X=e=>((0,r.dD)("data-v-143d0d07"),e=e(),(0,r.Cn)(),e),ee={class:"container"},te={class:"row justify-content-center g-2"},ae={key:0,style:{"font-family":"'bluto'",color:"#ffffff"},class:"display-4"},se={key:1,style:{"font-family":"'bluto'",color:"#ffffff"},class:"display-4"},re={class:"col-12 col-sm-4 col-md-8 align-self-center"},oe={class:"shadow p-3 mb-5 bg-body-tertiary rounded"},ie={class:"card"},ne={class:"card-body"},le={key:0,class:"input-group mb-3"},ce={class:"mb-3"},de={class:"input-group mb-3"},me=X((()=>(0,r._)("div",{class:"input-group-append"},[(0,r._)("button",{class:"btn btn-outline-secondary",type:"button","data-toggle":"tooltip","data-placement":"right",title:"Password needs to be atleast 8 characters long, 1 lowercase, 1 uppercase, 1 number and 1 special character."},[(0,r._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-question-lg",viewBox:"0 0 16 16"},[(0,r._)("path",{"fill-rule":"evenodd",d:"M4.475 5.458c-.284 0-.514-.237-.47-.517C4.28 3.24 5.576 2 7.825 2c2.25 0 3.767 1.36 3.767 3.215 0 1.344-.665 2.288-1.79 2.973-1.1.659-1.414 1.118-1.414 2.01v.03a.5.5 0 0 1-.5.5h-.77a.5.5 0 0 1-.5-.495l-.003-.2c-.043-1.221.477-2.001 1.645-2.712 1.03-.632 1.397-1.135 1.397-2.028 0-.979-.758-1.698-1.926-1.698-1.009 0-1.71.529-1.938 1.402-.066.254-.278.461-.54.461h-.777ZM7.496 14c.622 0 1.095-.474 1.095-1.09 0-.618-.473-1.092-1.095-1.092-.606 0-1.087.474-1.087 1.091S6.89 14 7.496 14Z"})])])],-1))),ue={key:1,class:"mb-3"},pe={key:0,class:"form-text",id:"basic-addon4"},he={class:"mb-3"},ge={class:"card-body"},_e={key:0,class:"card-text alert alert-danger"},fe={key:1,class:"card-text alert alert-success"},ye={class:"card",style:{"margin-top":"20px"}},be={class:"card-body"},ve={key:0,class:"text-muted"},we={key:1,class:"text-muted"};function ke(e,t,a,o,i,n){return(0,r.wg)(),(0,r.iD)("div",ee,[(0,r._)("div",te,[i.register?((0,r.wg)(),(0,r.iD)("h1",ae,"Sign up")):((0,r.wg)(),(0,r.iD)("h1",se,"Log in")),(0,r._)("div",re,[(0,r._)("div",oe,[(0,r._)("div",ie,[(0,r._)("div",ne,[i.register?((0,r.wg)(),(0,r.iD)("div",le,[(0,r.wy)((0,r._)("input",{class:"form-control",type:"name",name:"name",placeholder:"Username","onUpdate:modelValue":t[0]||(t[0]=e=>i.form.name=e),required:""},null,512),[[s.nr,i.form.name]])])):(0,r.kq)("",!0),(0,r._)("div",ce,[(0,r.wy)((0,r._)("input",{class:"form-control",type:"email",name:"email",placeholder:"Email","onUpdate:modelValue":t[1]||(t[1]=e=>i.form.email=e),required:"",minlength:"5"},null,512),[[s.nr,i.form.email]])]),(0,r._)("div",de,[(0,r.wy)((0,r._)("input",{class:"form-control",type:"password",name:"password",placeholder:"Password","onUpdate:modelValue":t[2]||(t[2]=e=>i.form.password=e),required:"",minlength:"8"},null,512),[[s.nr,i.form.password]]),me]),i.register?((0,r.wg)(),(0,r.iD)("div",ue,[(0,r.wy)((0,r._)("input",{class:"form-control",type:"password",name:"password2",placeholder:"Re-enter Password","onUpdate:modelValue":t[3]||(t[3]=e=>i.form.password2=e),required:"",minlength:"8"},null,512),[[s.nr,i.form.password2]]),this.form.password===this.form.password2&&this.form.password2.length>7?((0,r.wg)(),(0,r.iD)("div",pe,"Password Matches!!!")):(0,r.kq)("",!0)])):(0,r.kq)("",!0),(0,r._)("div",he,[i.register?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"btn btn-primary",type:"submit",onClick:t[4]||(t[4]=e=>n.submit_details())},"Submit")):((0,r.wg)(),(0,r.iD)("button",{key:1,class:"btn btn-primary",type:"submit",onClick:t[5]||(t[5]=(...e)=>n.login&&n.login(...e))},"Login"))])]),(0,r._)("div",ge,[this.form.error?((0,r.wg)(),(0,r.iD)("div",_e,(0,c.zw)(this.form.errmsg),1)):(0,r.kq)("",!0),this.success?((0,r.wg)(),(0,r.iD)("div",fe,(0,c.zw)(this.succmsg),1)):(0,r.kq)("",!0)])]),(0,r._)("div",ye,[(0,r._)("div",be,[i.register?((0,r.wg)(),(0,r.iD)("p",ve,[(0,r.Uk)(" Have an account? "),(0,r._)("a",{onClick:t[6]||(t[6]=(...e)=>n.state&&n.state(...e)),href:"#"},"Log in")])):((0,r.wg)(),(0,r.iD)("p",we,[(0,r.Uk)(" Not a member? "),(0,r._)("a",{onClick:t[7]||(t[7]=(...e)=>n.state&&n.state(...e)),href:"#"},"Register")]))])])])])])])}a(1703);var Se={data(){return{form:{name:"",email:"",password:"",password2:"",lowercheck:!1,uppercheck:!1,specialcheck:!1,numcheck:!1,error:!1,errmsg:""},session:JSON.parse(localStorage.getItem("userSession"))||null,token:"",exp:"",register:!1,succmsg:"",success:!1,flag:0}},methods:{...(0,T.OI)(["setUser_id"]),user_id(e){this.setUser_id(e)},home(){this.$router.push("/")},EmailCheck(e){const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return t.test(e)},NameCheck(e){return e.length>0},PasswordMatch(e,t){return e===t},PasswordCheck(e){return e.length>8&&!0===this.form.uppercheck&&!0===this.form.lowercheck&&!0===this.form.numcheck&&!0===this.form.specialcheck},state(){this.form.error=!1,this.register=!this.register},async submit_details(){if(this.EmailCheck(this.form.email)&&this.NameCheck(this.form.name)&&this.PasswordCheck(this.form.password)&&this.PasswordMatch(this.form.password,this.form.password2))try{const e=await Y.Z.post("http://127.0.0.1:5000/api/registration",this.form,{headers:{"Content-Type":"application/JSON"}});if("Admin Role Created successfully"===e.data.message&&(this.success=!0,this.succmsg="Admin created successfully"),e.data.error)throw new Error(e.data.error_description);this.form.error=!1,this.token=e.data.access_token,this.exp=e.data.exp,this.role=e.data.role[0],this.userid=e.data.user_id,this.username=e.data.user_name,this.form.error||(this.userSession={token:this.token,exp:this.exp,role:this.role,userid:this.userid,username:this.username},localStorage.setItem("userSession",JSON.stringify(this.userSession)),!1===this.success&&(this.success=!0,this.succmsg="Registration Successful"))}catch(e){this.form.error=!0,this.form.errmsg=e.response.data.error_description,console.log(e)}else this.NameCheck(this.form.name)?this.EmailCheck(this.form.email)?this.PasswordCheck(this.form.password)?this.PasswordMatch(this.form.password,this.form.password2)||(this.form.error=!0,this.form.errmsg="Passwords do not match"):(this.form.error=!0,this.form.errmsg="Please enter a valid password"):(this.form.error=!0,this.form.errmsg="Please enter a valid email"):(this.form.error=!0,this.form.errmsg="Please enter a valid name")},async login(){if(this.form.error=!1,this.flag=0,this.EmailCheck(this.form.email)&&this.PasswordCheck(this.form.password))try{const a=await Y.Z.post("http://127.0.0.1:5000/api/login",this.form,{headers:{"Content-Type":"application/JSON"}});if(console.log(a),!(a.status>=200&&a.status<300))throw this.form.error=!0,new Error(a.data.error_description);{this.token=a.data.access_token,this.exp=a.data.exp,console.log(this.exp),this.role=a.data.role,this.userSession={token:a.data.access_token,role:a.data.role[0],exp:a.data.exp,userid:a.data.user_id,username:a.data.user_name},localStorage.setItem("userSession",JSON.stringify(this.userSession));const s=!0,r=a.data.role[0];var e=a.data.user_id,t=a.data.user_name;this.$store.commit("setAuthentication",s),this.$store.commit("setRole",r),this.$store.commit("setUser_id",e),this.$store.commit("setUser_name",t),this.home()}}catch(a){this.form.error=!0,this.form.errmsg=a.response.data.error_description,console.log(a.response.data.error_description)}else this.EmailCheck(this.form.email)?this.PasswordCheck(this.form.password)||(this.form.error=!0,this.form.errmsg="Please enter a valid password",console.log("passcheckfailed")):(this.form.error=!0,this.form.errmsg="Please enter a valid email",console.log("emailcheckfailed"))}},watch:{"form.password"(e){this.form.lowercheck=!1,this.form.uppercheck=!1,this.form.specialcheck=!1,this.form.numcheck=!1;for(let t=0;t<e.length;t++){let a=e[t],s=e.charCodeAt(t);a>="a"&&a<="z"?this.form.lowercheck=!0:a>="A"&&a<="Z"?this.form.uppercheck=!0:a>="0"&&a<="9"?this.form.numcheck=!0:(s>=32&&s<=47||s>=58&&s<=64)&&(this.form.specialcheck=!0)}}}};const De=(0,C.Z)(Se,[["render",ke],["__scopeId","data-v-143d0d07"]]);var Te=De;const Ue=(0,T.MT)({state:{isAuthenticated:!1,role:null,user_id:null,selectedTheaterId:null,selectedScreenId:null,selectedScreenNo:null,selectedTheaterName:"",selectedTheaterTime:"",selectedScreenTech:"",selectedDate:null,selectedPrice:null,selectedAvailability:null,user_name:null},getters:{isAuthenticated:e=>e.isAuthenticated,role:e=>e.role,user_id:e=>e.user_id,user_name:e=>e.user_name,selectedTheaterId:e=>e.selectedTheaterId,selectedScreenId:e=>e.selectedScreenId,selectedScreenNo:e=>e.selectedScreenNo,selectedScreenTech:e=>e.selectedScreenTech,selectedTheaterName:e=>e.selectedTheaterName,selectedTheaterTime:e=>e.selectedTheaterTime,selectedAvailability:e=>e.selectedAvailability,selectedDate:e=>e.selectedDate,selectedPrice:e=>e.selectedPrice},mutations:{setAuthentication(e,t){e.isAuthenticated=t},setRole(e,t){e.role=t},setUser_id(e,t){e.user_id=t},setUser_name(e,t){e.user_name=t},setSelectedTheaterId(e,t){e.selectedTheaterId=t},setSelectedScreenId(e,t){e.selectedScreenId=t},setSelectedScreenNo(e,t){e.selectedScreenNo=t},setSelectedScreenTech(e,t){e.selectedScreenTech=t},setSelectedTheaterName(e,t){e.selectedTheaterName=t},setSelectedTheaterTime(e,t){e.selectedTheaterTime=t},setSelectedDate(e,t){e.selectedDate=t},setSelectedPrice(e,t){e.selectedPrice=t},setSelectedAvailability(e,t){e.selectedAvailability=t},logout(e){e.isAuthenticated=!1,e.role=null,e.user_id=null,e.user_name=null,localStorage.removeItem("userSession")}}}),Ce=localStorage.getItem("userSession"),xe=JSON.parse(Ce);if(xe&&xe.token){const{token:e,role:t,exp:a,userid:s,username:r}=xe;console.log("Token:",e),console.log("Role:",t),console.log("Expiration timestamp:",a);const o=parseInt(a,10),i=1e3*o,n=Date.now(),l=Date.UTC(new Date(n).getUTCFullYear(),new Date(n).getUTCMonth(),new Date(n).getUTCDate(),new Date(n).getUTCHours(),new Date(n).getUTCMinutes(),new Date(n).getUTCSeconds(),new Date(n).getUTCMilliseconds()),c=60*(new Date).getTimezoneOffset()*1e3,d=l+c;console.log("current tmpstmp:",n),d<i?(console.log("Token is still valid"),Ue.commit("setAuthentication",!0),Ue.commit("setRole",t),Ue.commit("setUser_id",s),Ue.commit("setUser_name",r)):(console.log("Token has expired"),localStorage.removeItem("userSession"),Ue.commit("setAuthentication",!1),Ue.commit("setRole",null),Ue.commit("setUser_id",null),Ue.commit("setUser_name",null))}else console.log("Token not found in local storage"),Ue.commit("setAuthentication",!1),Ue.commit("setRole",null),Ue.commit("setUser_id",null),Ue.commit("setUser_name",null);var Ne=Ue;const $e=e=>((0,r.dD)("data-v-cee6b29e"),e=e(),(0,r.Cn)(),e),ze={class:"container mt-5"},Ae=$e((()=>(0,r._)("h1",{class:"mb-4",style:{"font-family":"'bluto'",color:"#ffffff"}},"Add Theatre",-1))),Ie={class:"shadow p-3 mb-5 bg-body-tertiary rounded",style:{width:"900px",margin:"auto"}},qe={class:"card"},Oe={class:"card-body"},Ve={class:"mb-3"},Me=$e((()=>(0,r._)("label",{for:"theatreName",class:"form-label"},"Theatre Name",-1))),Je={class:"mb-3"},Pe=$e((()=>(0,r._)("label",{for:"city",class:"form-label"},"City",-1))),Ze=$e((()=>(0,r._)("h4",{class:"mt-4 mb-3"},"Screens",-1))),Ee={class:"row mb-2"},Re={class:"col"},Be=$e((()=>(0,r._)("label",{for:"screenNumber",class:"form-label"},"Screen Number",-1))),Fe=["onUpdate:modelValue"],Le={class:"col"},je=$e((()=>(0,r._)("label",{for:"technology",class:"form-label"},"Technology",-1))),He=["onUpdate:modelValue"],We={class:"col"},Ye=$e((()=>(0,r._)("label",{for:"seatCapacity",class:"form-label"},"Seat Capacity",-1))),Ke=["onUpdate:modelValue"],Ge={class:"col"},Qe=$e((()=>(0,r._)("label",{for:"premium",class:"form-label"},"Premium",-1))),Xe=["onUpdate:modelValue"],et={class:"col"},tt=["onClick"],at=$e((()=>(0,r._)("button",{type:"submit",style:{margin:"5px"},class:"btn btn-success mt-3"},"Save Theatre",-1)));function st(e,t,a,o,i,n){return(0,r.wg)(),(0,r.iD)("div",ze,[Ae,(0,r._)("div",Ie,[(0,r._)("div",qe,[(0,r._)("div",Oe,[(0,r._)("form",{onSubmit:t[3]||(t[3]=(0,s.iM)(((...e)=>n.submitForm&&n.submitForm(...e)),["prevent"]))},[(0,r._)("div",Ve,[Me,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control",id:"theatreName","onUpdate:modelValue":t[0]||(t[0]=e=>i.theatreName=e),required:""},null,512),[[s.nr,i.theatreName]])]),(0,r._)("div",Je,[Pe,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control",id:"city","onUpdate:modelValue":t[1]||(t[1]=e=>i.city=e),required:""},null,512),[[s.nr,i.city]])]),Ze,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.screens,((e,t)=>((0,r.wg)(),(0,r.iD)("div",{key:t},[(0,r._)("div",Ee,[(0,r._)("div",Re,[Be,(0,r.wy)((0,r._)("input",{type:"number",class:"form-control","onUpdate:modelValue":t=>e.screenNumber=t,required:""},null,8,Fe),[[s.nr,e.screenNumber]])]),(0,r._)("div",Le,[je,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t=>e.technology=t,required:""},null,8,He),[[s.nr,e.technology]])]),(0,r._)("div",We,[Ye,(0,r.wy)((0,r._)("input",{type:"number",class:"form-control","onUpdate:modelValue":t=>e.seatCapacity=t,required:""},null,8,Ke),[[s.nr,e.seatCapacity]])]),(0,r._)("div",Ge,[Qe,(0,r.wy)((0,r._)("input",{type:"number",class:"form-control","onUpdate:modelValue":t=>e.premium=t},null,8,Xe),[[s.nr,e.premium]])]),(0,r._)("div",et,[(0,r._)("button",{type:"button",class:"btn btn-danger",onClick:e=>n.removeScreen(t)}," Remove ",8,tt)])])])))),128)),(0,r._)("button",{type:"button",style:{margin:"5px"},class:"btn btn-primary mt-3",onClick:t[2]||(t[2]=(...e)=>n.addScreen&&n.addScreen(...e))}," Add Screen "),at],32)])])])])}var rt={data(){return{theatreName:"",city:"",screens:[{screenNumber:null,technology:"",seatCapacity:null,premium:null}],msg:"",error:!1,success:!1}},methods:{addScreen(){this.screens.push({screenNumber:null,technology:"",seatCapacity:null,premium:null})},removeScreen(e){this.screens.splice(e,1)},async submitForm(){try{const e=JSON.parse(localStorage.getItem("userSession")),t=e.token,a=e.role;console.log(this.screens);const s=await Y.Z.post("http://127.0.0.1:5000/api/theatre",{name:this.theatreName,city:this.city,screens:this.screens},{headers:{"Content-Type":"application/JSON",Authorization:`Bearer ${t}`,Role:JSON.stringify(a)}});if(!(s.status>=200&&s.status<300))throw this.error=!0,alert(s.data.message),new Error(s.data.message);this.success=!0,this.msg=s.data.message,this.screens=[],alert(s.data.message)}catch(e){this.error=!0,this.msg=e.response.data.error_description,console.log(e.response.data.error_description)}}}};const ot=(0,C.Z)(rt,[["render",st],["__scopeId","data-v-cee6b29e"]]);var it=ot;const nt=e=>((0,r.dD)("data-v-a7ec14c0"),e=e(),(0,r.Cn)(),e),lt={class:"container mt-5"},ct=nt((()=>(0,r._)("h1",{class:"mb-4",style:{"font-family":"'bluto'",color:"#ffffff"}},"Add Movie",-1))),dt={class:"shadow p-3 mb-5 bg-body-tertiary rounded",style:{width:"1000px",margin:"auto"}},mt={class:"card"},ut={class:"card-body"},pt={class:"mb-3"},ht=nt((()=>(0,r._)("label",{for:"title",class:"form-label"},"Title",-1))),gt={class:"mb-3"},_t=nt((()=>(0,r._)("label",{for:"boxart",class:"form-label"},"Box Art Image Â ",-1))),ft={class:"mb-3"},yt=nt((()=>(0,r._)("label",{for:"director",class:"form-label"},"Director",-1))),bt={class:"mb-3"},vt=nt((()=>(0,r._)("label",{for:"description",class:"form-label"},"Description",-1))),wt={class:"mb-3"},kt=nt((()=>(0,r._)("label",{for:"cast",class:"form-label"},"Cast",-1))),St={class:"mb-3"},Dt=nt((()=>(0,r._)("label",{for:"duration",class:"form-label"},"Duration",-1))),Tt={class:"mb-3"},Ut=nt((()=>(0,r._)("label",{for:"language",class:"form-label"},"Language",-1))),Ct={class:"mb-3"},xt=nt((()=>(0,r._)("label",{for:"rate",class:"form-label"},"Base Rate",-1))),Nt={class:"mb-3"},$t=nt((()=>(0,r._)("label",{for:"genre",class:"form-label"},"Genre",-1))),zt={class:"mb-3"},At=nt((()=>(0,r._)("label",{for:"startDate",class:"form-label"},"Start Date",-1))),It={class:"mb-3"},qt=nt((()=>(0,r._)("label",{for:"endDate",class:"form-label"},"End Date",-1))),Ot=nt((()=>(0,r._)("button",{type:"submit",class:"btn btn-primary mt-3"}," Add Movie ",-1)));function Vt(e,t,a,o,i,n){return(0,r.wg)(),(0,r.iD)("div",lt,[ct,(0,r._)("div",dt,[(0,r._)("div",mt,[(0,r._)("div",ut,[(0,r._)("form",{onSubmit:t[11]||(t[11]=(0,s.iM)(((...e)=>n.submitForm&&n.submitForm(...e)),["prevent"]))},[(0,r._)("div",pt,[ht,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":t[0]||(t[0]=e=>i.title=e),required:""},null,512),[[s.nr,i.title]])]),(0,r._)("div",gt,[_t,(0,r._)("input",{type:"file",ref:"boxart",onChange:t[1]||(t[1]=(...e)=>n.onFileChange&&n.onFileChange(...e)),accept:"image/*"},null,544)]),(0,r._)("div",ft,[yt,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control",id:"director","onUpdate:modelValue":t[2]||(t[2]=e=>i.director=e),required:""},null,512),[[s.nr,i.director]])]),(0,r._)("div",bt,[vt,(0,r.wy)((0,r._)("textarea",{class:"form-control",id:"description","onUpdate:modelValue":t[3]||(t[3]=e=>i.description=e),required:""},null,512),[[s.nr,i.description]])]),(0,r._)("div",wt,[kt,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control",id:"cast","onUpdate:modelValue":t[4]||(t[4]=e=>i.cast=e),required:""},null,512),[[s.nr,i.cast]])]),(0,r._)("div",St,[Dt,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control",id:"duration","onUpdate:modelValue":t[5]||(t[5]=e=>i.duration=e),required:""},null,512),[[s.nr,i.duration]])]),(0,r._)("div",Tt,[Ut,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control",id:"language","onUpdate:modelValue":t[6]||(t[6]=e=>i.language=e),required:""},null,512),[[s.nr,i.language]])]),(0,r._)("div",Ct,[xt,(0,r.wy)((0,r._)("input",{type:"number",class:"form-control",id:"rate","onUpdate:modelValue":t[7]||(t[7]=e=>i.rate=e),required:""},null,512),[[s.nr,i.rate]])]),(0,r._)("div",Nt,[$t,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control",id:"genre","onUpdate:modelValue":t[8]||(t[8]=e=>i.genre=e),required:""},null,512),[[s.nr,i.genre]])]),(0,r._)("div",zt,[At,(0,r.wy)((0,r._)("input",{type:"date",class:"form-control","onUpdate:modelValue":t[9]||(t[9]=e=>i.start_date=e),required:""},null,512),[[s.nr,i.start_date]])]),(0,r._)("div",It,[qt,(0,r.wy)((0,r._)("input",{type:"date",class:"form-control","onUpdate:modelValue":t[10]||(t[10]=e=>i.end_date=e),required:""},null,512),[[s.nr,i.end_date]])]),Ot],32)])])])])}var Mt={data(){return{title:"",boxart:null,director:"",description:"",cast:"",duration:"",rate:"",language:"",genre:"",start_date:"",end_date:""}},methods:{onFileChange(e){this.boxart=e.target.files[0]},async submitForm(){const e=new FormData;e.append("title",this.title),e.append("director",this.director),e.append("boxart",this.boxart),e.append("description",this.description),e.append("cast",this.cast),e.append("duration",this.duration),e.append("language",this.language),e.append("rate",this.rate),e.append("genre",this.genre),e.append("start_date",this.start_date),e.append("end_date",this.end_date);try{const t=JSON.parse(localStorage.getItem("userSession")),a=t.token,s=t.role,r=await Y.Z.post("http://127.0.0.1:5000/api/add-movie",e,{headers:{Authorization:`Bearer ${a}`,Role:JSON.stringify(s)}});alert(r.data.message),console.log(r)}catch(t){alert(t.response.data.message)}},clearForm(){this.title="",this.boxart=null,this.director="",this.selectedTheater=null,this.selectedScreen=null,this.boxart.value=null}}};const Jt=(0,C.Z)(Mt,[["render",Vt],["__scopeId","data-v-a7ec14c0"]]);var Pt=Jt;const Zt=e=>((0,r.dD)("data-v-9db35786"),e=e(),(0,r.Cn)(),e),Et={class:"container mt-5"},Rt=Zt((()=>(0,r._)("h1",{class:"mb-4",style:{"font-family":"'bluto'",color:"#ffffff"}},"Latest Movies",-1))),Bt={class:"row g-0"},Ft={class:"col-md-4"},Lt=["src"],jt={class:"col-md-8"},Ht={class:"card-body d-flex flex-column justify-content-between"},Wt={class:"card"},Yt={class:"card-body"},Kt={class:"card-title"},Gt={class:"card-text"},Qt=Zt((()=>(0,r._)("strong",null,"Director:",-1))),Xt={class:"card-text"},ea=Zt((()=>(0,r._)("strong",null,"Description:",-1))),ta={class:"card-text"},aa=Zt((()=>(0,r._)("strong",null,"Cast:",-1))),sa={class:"card-text"},ra=Zt((()=>(0,r._)("strong",null,"Duration:",-1))),oa={class:"card-text"},ia=Zt((()=>(0,r._)("strong",null,"Language:",-1))),na={class:"card-text"},la=Zt((()=>(0,r._)("strong",null,"Rate:",-1))),ca={class:"card-text"},da=Zt((()=>(0,r._)("strong",null,"Genre:",-1))),ma={class:"card-text"},ua=Zt((()=>(0,r._)("strong",null,"Start Date:",-1))),pa={class:"card-text"},ha=Zt((()=>(0,r._)("strong",null,"End Date:",-1))),ga={key:0,class:"card-body"},_a=["onClick"],fa=["onClick"],ya=["onClick"],ba=["onClick"];function va(e,t,a,s,o,i){const n=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",Et,[Rt,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.movies,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e.id,class:"card mb-3"},[(0,r._)("div",Bt,[(0,r._)("div",Ft,[(0,r._)("img",{src:i.getBoxArtUrl(e.boxart),class:"img-fluid movie-thumbnail",alt:"Movie Box Art"},null,8,Lt)]),(0,r._)("div",jt,[(0,r._)("div",Ht,[(0,r._)("div",Wt,[(0,r._)("div",Yt,[(0,r.Wm)(n,{to:{name:"movie",params:{id:e.id}}},{default:(0,r.w5)((()=>[(0,r._)("h3",Kt,(0,c.zw)(e.title),1)])),_:2},1032,["to"]),(0,r._)("p",Gt,[Qt,(0,r.Uk)(" "+(0,c.zw)(e.director),1)]),(0,r._)("p",Xt,[ea,(0,r.Uk)(" "+(0,c.zw)(e.description),1)]),(0,r._)("p",ta,[aa,(0,r.Uk)(" "+(0,c.zw)(e.cast),1)]),(0,r._)("p",sa,[ra,(0,r.Uk)(" "+(0,c.zw)(e.duration),1)]),(0,r._)("p",oa,[ia,(0,r.Uk)(" "+(0,c.zw)(e.language),1)]),(0,r._)("p",na,[la,(0,r.Uk)(" "+(0,c.zw)(e.rate)+" â¹",1)]),(0,r._)("p",ca,[da,(0,r.Uk)(" "+(0,c.zw)(e.genre),1)]),(0,r._)("p",ma,[ua,(0,r.Uk)(" "+(0,c.zw)(i.formatDate(e.start_date)),1)]),(0,r._)("p",pa,[ha,(0,r.Uk)(" "+(0,c.zw)(i.formatDate(e.end_date)),1)])])]),i.adminparts?((0,r.wg)(),(0,r.iD)("div",ga,[i.adminparts?((0,r.wg)(),(0,r.iD)("button",{key:0,style:{margin:"5px"},class:"btn btn-secondary",onClick:t=>i.editMovie(e.id)},"Edit Movie",8,_a)):(0,r.kq)("",!0),i.adminparts?((0,r.wg)(),(0,r.iD)("button",{key:1,style:{margin:"5px"},class:"btn btn-secondary",onClick:t=>i.addTimings(e.id,e.title)},"Add Timings",8,fa)):(0,r.kq)("",!0),i.adminparts?((0,r.wg)(),(0,r.iD)("button",{key:2,style:{margin:"5px"},class:"btn btn-secondary",onClick:t=>i.editTimings(e.id,e.title)},"Edit Timings",8,ya)):(0,r.kq)("",!0),i.adminparts?((0,r.wg)(),(0,r.iD)("button",{key:3,style:{margin:"5px"},class:"btn btn-danger",onClick:t=>i.deleteMovie(e.id)},"Delete Movie",8,ba)):(0,r.kq)("",!0)])):(0,r.kq)("",!0)])])])])))),128))])}var wa={computed:{...(0,T.Se)(["isAuthenticated","role","user_name","user_id"]),adminparts(){return this.isAuthenticated&&"admin"===this.role}},data(){return{movies:[]}},mounted(){this.fetchLatestMovies()},methods:{async deleteTimings(e){try{const t=JSON.parse(localStorage.getItem("userSession")),a=t.token,s=t.role,r=await Y.Z.delete(`http://127.0.0.1:5000/api/movie/${e}/timings`,{headers:{"Content-Type":"application/JSON",Authorization:`Bearer ${a}`,Role:JSON.stringify(s)}});200===r.status?console.log("Timings deleted successfully"):console.error("Error deleting timings")}catch(t){console.error("Error deleting timings:",t)}},async deleteMovie(e){try{const t=JSON.parse(localStorage.getItem("userSession")),a=t.token,s=t.role,r=window.confirm("Are you sure you want to delete this movie?");if(r){const t=await Y.Z.delete(`http://127.0.0.1:5000/api/movie/${e}`,{headers:{"Content-Type":"application/JSON",Authorization:`Bearer ${a}`,Role:JSON.stringify(s)}});200===t.status?(this.movies=this.movies.filter((t=>t.id!==e)),console.log("Movie deleted successfully")):console.error("Error deleting movie")}}catch(t){console.error("Error deleting movie:",t)}},editTimings(e,t){this.$router.push({name:"edit_timings",params:{movieId:e},query:{titlemovie:t}})},editMovie(e){this.$router.push({name:"edit_movie",params:{movieId:e}})},async fetchLatestMovies(){try{const e=await Y.Z.get("http://127.0.0.1:5000/api/add-movie",{headers:{"Content-Type":"application/JSON"}});this.movies=e.data}catch(e){console.error("Error fetching latest movies:",e),this.loading=!1}},getBoxArtUrl(e){return`http://127.0.0.1:5000/static/img/Movies/${e}`},formatDate(e){const t={year:"numeric",month:"long",day:"numeric"};return new Date(e).toLocaleDateString(void 0,t)},addTimings(e,t){console.log(t),this.$router.push({name:"add_timings",params:{movieID:e},query:{titlemovie:t}})}}};const ka=(0,C.Z)(wa,[["render",va],["__scopeId","data-v-9db35786"]]);var Sa=ka;const Da=e=>((0,r.dD)("data-v-282abcac"),e=e(),(0,r.Cn)(),e),Ta={class:"container mt-5"},Ua=Da((()=>(0,r._)("h2",{class:"mb-4",style:{"font-family":"'bluto'",color:"#ffffff"}},"Theaters and Screens",-1))),Ca={class:"shadow p-3 mb-5 bg-body-tertiary rounded"},xa={class:"card-body"},Na={class:"shadow p-3 mb-5 bg-body-tertiary rounded"},$a={class:"card-title"},za=["onClick"],Aa=["onClick"],Ia=["onClick"],qa={class:"card-text"},Oa={class:"list-group"},Va={class:"mb-0"},Ma={class:"mb-0"},Ja=Da((()=>(0,r._)("strong",null,"Technology:",-1))),Pa={class:"mb-0"},Za=Da((()=>(0,r._)("strong",null,"Seat Capacity:",-1))),Ea={class:"mb-0"},Ra=Da((()=>(0,r._)("strong",null,"Premium:",-1)));function Ba(e,t,a,s,o,i){const n=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",Ta,[Ua,(0,r._)("div",Ca,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.theaters,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e.id,class:"card mb-3"},[(0,r._)("div",xa,[(0,r._)("div",Na,[(0,r.Wm)(n,{to:{name:"theatre",params:{theatreId:e.id}}},{default:(0,r.w5)((()=>[(0,r._)("h3",$a,(0,c.zw)(e.name)+" ("+(0,c.zw)(e.city)+")",1)])),_:2},1032,["to"]),i.adminparts?((0,r.wg)(),(0,r.iD)("button",{key:0,style:{margin:"5px"},class:"btn btn-primary",onClick:t=>i.editTheater(e.id)}," Edit ",8,za)):(0,r.kq)("",!0),i.adminparts?((0,r.wg)(),(0,r.iD)("button",{key:1,style:{margin:"5px"},class:"btn btn-danger ml-2",onClick:t=>i.removeTheater(e.id)}," Remove ",8,Aa)):(0,r.kq)("",!0),i.adminparts?((0,r.wg)(),(0,r.iD)("button",{key:2,style:{margin:"5px"},class:"btn btn-secondary ml-2",onClick:t=>i.exportTheatre(e.id)}," Export ",8,Ia)):(0,r.kq)("",!0),(0,r._)("p",qa,[(0,r._)("ul",Oa,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.screens,(e=>((0,r.wg)(),(0,r.iD)("li",{key:e.id,class:"list-group-item"},[(0,r._)("h6",Va,[(0,r._)("strong",null,"Screen "+(0,c.zw)(e.number),1)]),(0,r._)("p",Ma,[Ja,(0,r.Uk)(" "+(0,c.zw)(e.technology),1)]),(0,r._)("p",Pa,[Za,(0,r.Uk)(" "+(0,c.zw)(e.seat_capacity),1)]),(0,r._)("p",Ea,[Ra,(0,r.Uk)(" "+(0,c.zw)(e.premium),1)])])))),128))])])])])])))),128))])])}var Fa={computed:{...(0,T.Se)(["isAuthenticated","role","user_name","user_id"]),adminparts(){return this.isAuthenticated&&"admin"===this.role}},data(){return{theaters:[]}},mounted(){this.fetchTheaters()},methods:{async exportTheatre(e){var t=e,a=this.$store.getters.user_id;const s=JSON.parse(localStorage.getItem("userSession")),r=s.token,o=await Y.Z.get(`http://127.0.0.1:5000/api/${a}/export-csv/${t}`,{headers:{"Content-Type":"application/JSON",Authorization:`Bearer ${r}`}});console.log(o.data),alert("export job initiated")},editTheater(e){this.$router.push(`/edit-theater/${e}`)},async removeTheater(e){try{const t=JSON.parse(localStorage.getItem("userSession")),a=t.token,s=t.role,r=window.confirm("Are you sure you want to delete this theatre?");if(r){const t=await Y.Z.delete(`http://127.0.0.1:5000/api/theatre/${e}`,{headers:{"Content-Type":"application/JSON",Authorization:`Bearer ${a}`,Role:JSON.stringify(s)}});if(!(t.status>=200&&t.status<300))throw new Error(t.data.error_description);this.theaters=this.theaters.filter((t=>t.id!==e))}}catch(t){console.error(t.response.data.error_description)}},async fetchTheaters(){try{const e=await Y.Z.get("http://127.0.0.1:5000/api/theatre",{headers:{"Content-Type":"application/JSON"}});this.theaters=e.data}catch(e){console.error(e.response.data.message)}}}};const La=(0,C.Z)(Fa,[["render",Ba],["__scopeId","data-v-282abcac"]]);var ja=La;const Ha=e=>((0,r.dD)("data-v-4db8bc32"),e=e(),(0,r.Cn)(),e),Wa={class:"container"},Ya={style:{"font-family":"'bluto'",color:"#ffffff"}},Ka={class:"shadow p-3 mb-5 bg-body-tertiary rounded",style:{width:"800px",margin:"auto"}},Ga={class:"card"},Qa={class:"card-body",style:{}},Xa={class:"mb-3"},es=Ha((()=>(0,r._)("label",{for:"start_date",class:"form-label"},"Start Date",-1))),ts={class:"mb-3"},as=Ha((()=>(0,r._)("label",{for:"end_date",class:"form-label"},"End Date",-1))),ss={class:"mb-3"},rs=Ha((()=>(0,r._)("label",{for:"start_time",class:"form-label"},"Start Time",-1))),os={class:"mb-3"},is=Ha((()=>(0,r._)("label",{for:"end_time",class:"form-label"},"End Time",-1))),ns={key:0,style:{width:"800px",margin:"auto"}},ls=Ha((()=>(0,r._)("h2",{class:"mb-4",style:{"font-family":"'bluto'",color:"#ffffff"}},"Theaters and Screens",-1))),cs={class:"shadow p-3 mb-5 bg-body-tertiary rounded"},ds={class:"card-body"},ms={class:"shadow p-3 mb-5 bg-body-tertiary rounded"},us={class:"card-title"},ps={class:"card-text"},hs={class:"list-group"},gs={class:"mb-0"},_s={class:"mb-0"},fs=Ha((()=>(0,r._)("strong",null,"Technology:",-1))),ys={class:"mb-0"},bs=Ha((()=>(0,r._)("strong",null,"Seat Capacity:",-1))),vs={class:"mb-0"},ws=Ha((()=>(0,r._)("strong",null,"Premium:",-1))),ks=["onUpdate:modelValue","value"];function Ss(e,t,a,o,i,n){return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",Wa,[(0,r._)("h1",Ya,"Add Timings for Movie: "+(0,c.zw)(this.$route.query.titlemovie),1),(0,r._)("form",null,[(0,r._)("div",Ka,[(0,r._)("div",Ga,[(0,r._)("div",Qa,[(0,r._)("div",Xa,[es,(0,r.wy)((0,r._)("input",{type:"date",class:"form-control",id:"start_date","onUpdate:modelValue":t[0]||(t[0]=e=>i.start_date=e),required:""},null,512),[[s.nr,i.start_date]])]),(0,r._)("div",ts,[as,(0,r.wy)((0,r._)("input",{type:"date",class:"form-control",id:"end_date","onUpdate:modelValue":t[1]||(t[1]=e=>i.end_date=e),required:""},null,512),[[s.nr,i.end_date]])]),(0,r._)("div",ss,[rs,(0,r.wy)((0,r._)("input",{type:"time",class:"form-control",id:"start_time","onUpdate:modelValue":t[2]||(t[2]=e=>i.start_time=e),required:""},null,512),[[s.nr,i.start_time]])]),(0,r._)("div",os,[is,(0,r.wy)((0,r._)("input",{type:"time",class:"form-control",id:"end_time","onUpdate:modelValue":t[3]||(t[3]=e=>i.end_time=e),required:""},null,512),[[s.nr,i.end_time]])]),(0,r._)("button",{class:"btn btn-primary",onClick:t[4]||(t[4]=(0,s.iM)((e=>n.availableTheatre(a.movieID)),["prevent"]))},"Fetch Theatres")])])]),this.theaters.length>0?((0,r.wg)(),(0,r.iD)("div",ns,[ls,(0,r._)("div",cs,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.theaters,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e.id,class:"card mb-3"},[(0,r._)("div",ds,[(0,r._)("div",ms,[(0,r._)("h5",us,(0,c.zw)(e.name)+" ("+(0,c.zw)(e.city)+")",1),(0,r._)("p",ps,[(0,r._)("ul",hs,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.screens,(e=>((0,r.wg)(),(0,r.iD)("li",{key:e.id,class:"list-group-item"},[(0,r._)("h6",gs,[(0,r._)("strong",null,"Screen "+(0,c.zw)(e.number),1)]),(0,r._)("p",_s,[fs,(0,r.Uk)(" "+(0,c.zw)(e.technology),1)]),(0,r._)("p",ys,[bs,(0,r.Uk)(" "+(0,c.zw)(e.seat_capacity),1)]),(0,r._)("p",vs,[ws,(0,r.Uk)(" "+(0,c.zw)(e.premium?"Yes":"No"),1)]),(0,r.wy)((0,r._)("input",{type:"checkbox","onUpdate:modelValue":t=>e.selected=t,value:e.id},null,8,ks),[[s.e8,e.selected]])])))),128))])])])])])))),128))]),(0,r._)("button",{class:"btn btn-primary",onClick:t[5]||(t[5]=(0,s.iM)((e=>n.submitTimings()),["prevent"]))},"Submit")])):(0,r.kq)("",!0)])])])}var Ds={props:["movieID"],data(){return{start_time:"",end_time:"",start_date:"",end_date:"",theaters:[]}},methods:{async availableTheatre(e){const t=new FormData;t.append("start_date",this.start_date),t.append("end_date",this.end_date),t.append("start_time",this.start_time),t.append("end_time",this.end_time);try{const a=JSON.parse(localStorage.getItem("userSession")),s=a.token,r=a.role,o=await Y.Z.post("http://127.0.0.1:5000/api/movie-timings",t,{headers:{Authorization:`Bearer ${s}`,Role:JSON.stringify(r)}});console.log(o),console.log(e),this.theaters=o.data}catch(a){alert(a.response.data.message)}},async submitTimings(){const e=this.theaters.filter((e=>e.screens.some((e=>e.selected)))),t={};e.forEach((e=>{const a=e.screens.filter((e=>e.selected));t[e.id]=a.map((e=>e.id))}));const a={movieID:this.movieID,start_date:this.start_date,end_date:this.end_date,start_time:this.start_time,end_time:this.end_time,theater_screen_dict:t};console.log(a);try{const e=JSON.parse(localStorage.getItem("userSession")),t=e.token,s=e.role,r=await Y.Z.post("http://127.0.0.1:5000/api/add-time-slot",a,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`,Role:JSON.stringify(s)}});console.log(r.data.message),alert(r.data.message)}catch(s){console.log(s.response.data.message)}}}};const Ts=(0,C.Z)(Ds,[["render",Ss],["__scopeId","data-v-4db8bc32"]]);var Us=Ts;const Cs=e=>((0,r.dD)("data-v-dc866ebe"),e=e(),(0,r.Cn)(),e),xs={class:"container"},Ns={key:0},$s={style:{"font-family":"'bluto'",color:"#ffffff"}},zs=["src","alt"],As=Cs((()=>(0,r._)("br",null,null,-1))),Is=Cs((()=>(0,r._)("br",null,null,-1))),qs={style:{"max-width":"fit-content",margin:"auto"},class:"shadow p-3 mb-5 bg-body-tertiary rounded"},Os={class:"card"},Vs={class:"card-body-in"},Ms=Cs((()=>(0,r._)("br",null,null,-1))),Js=Cs((()=>(0,r._)("strong",null,"Director:",-1))),Ps=Cs((()=>(0,r._)("strong",null,"Cast:",-1))),Zs=Cs((()=>(0,r._)("strong",null,"Duration:",-1))),Es=Cs((()=>(0,r._)("strong",null,"Description:",-1))),Rs=Cs((()=>(0,r._)("strong",null,"Language:",-1))),Bs=Cs((()=>(0,r._)("strong",null,"Base Price:",-1))),Fs=Cs((()=>(0,r._)("strong",null,"Genre:",-1))),Ls=Cs((()=>(0,r._)("strong",null,"Start Date:",-1))),js=Cs((()=>(0,r._)("strong",null,"End Date:",-1))),Hs=Cs((()=>(0,r._)("strong",null,"Date Added:",-1))),Ws={class:"star-rating-container"},Ys=Cs((()=>(0,r._)("br",null,null,-1))),Ks=Cs((()=>(0,r._)("br",null,null,-1))),Gs=Cs((()=>(0,r._)("br",null,null,-1))),Qs={key:1},Xs=Cs((()=>(0,r._)("p",null,"Loading...",-1))),er=[Xs];function tr(e,t,a,s,o,i){const n=(0,r.up)("star-rating");return(0,r.wg)(),(0,r.iD)("div",xs,[o.movie?((0,r.wg)(),(0,r.iD)("div",Ns,[(0,r._)("h1",$s,(0,c.zw)(o.movie.title),1),(0,r._)("img",{src:`http://127.0.0.1:5000/static/img/Movies/${o.movie.boxart}`,alt:o.movie.title},null,8,zs),As,Is,(0,r._)("div",qs,[(0,r._)("div",Os,[(0,r._)("div",Vs,[Ms,(0,r._)("p",null,[Js,(0,r.Uk)(" "+(0,c.zw)(o.movie.director)+" Â Â Â  ",1),Ps,(0,r.Uk)(" "+(0,c.zw)(o.movie.cast)+" Â Â Â  ",1),Zs,(0,r.Uk)(" "+(0,c.zw)(o.movie.duration),1)]),(0,r._)("p",null,[Es,(0,r.Uk)(" "+(0,c.zw)(o.movie.description),1)]),(0,r._)("p",null,[Rs,(0,r.Uk)(" "+(0,c.zw)(o.movie.language)+" Â Â Â  ",1),Bs,(0,r.Uk)(" "+(0,c.zw)(o.movie.rate)+"â¹ Â Â Â  ",1),Fs,(0,r.Uk)(" "+(0,c.zw)(o.movie.genre),1)]),(0,r._)("p",null,[Ls,(0,r.Uk)(" "+(0,c.zw)(i.formatDate(o.movie.start_date))+" Â Â Â ",1),js,(0,r.Uk)(" "+(0,c.zw)(i.formatDate(o.movie.end_date))+" Â Â Â  ",1),Hs,(0,r.Uk)(" "+(0,c.zw)(i.formatDate(o.movie.date_added)),1)]),(0,r._)("div",Ws,[(0,r.Uk)(" Average Rating :"),(0,r.Wm)(n,{modelValue:o.movie.rating,"onUpdate:modelValue":t[0]||(t[0]=e=>o.movie.rating=e),"star-size":20,"read-only":!0,increment:.01,rating:o.movie.rating},null,8,["modelValue","rating"])]),Ys,(0,r._)("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=e=>i.bookTickets(o.movie.id,o.movie.rate))},"Book Tickets"),Ks,Gs])])])])):((0,r.wg)(),(0,r.iD)("div",Qs,er))])}var ar=a(9056),sr=a.n(ar),rr={components:{StarRating:sr()},data(){return{movie:null,title:""}},async mounted(){await this.fetchMovieDetails()},methods:{async fetchMovieDetails(){try{const e=this.$route.params.id;console.log(e);const t=await Y.Z.get(`http://127.0.0.1:5000/api/movie/${e}`);this.movie=t.data,this.title=t.data.title,console.log(this.movie)}catch(e){console.log(e.response.data.message)}},bookTickets(e,t){console.log(t),this.$router.push({name:"book_tickets",params:{movieID:e},query:{moviefare:t}})},formatDate(e){const t={year:"numeric",month:"long",day:"numeric"};return new Date(e).toLocaleDateString(void 0,t)}}};const or=(0,C.Z)(rr,[["render",tr],["__scopeId","data-v-dc866ebe"]]);var ir=or;const nr=e=>((0,r.dD)("data-v-39197c74"),e=e(),(0,r.Cn)(),e),lr={class:"container"},cr={class:"row justify-content-center g-2"},dr={class:"centered-div"},mr=nr((()=>(0,r._)("h1",{class:"display-4",style:{"font-family":"'bluto'",color:"#ffffff"}},"Book Tickets",-1))),ur={style:{"max-width":"fit-content",margin:"auto"},class:"shadow p-3 mb-5 bg-body-tertiary rounded"},pr={class:"card"},hr={class:"card-body"},gr={class:"input-group mb-3"},_r=nr((()=>(0,r._)("label",{class:"input-group-text"},"City",-1))),fr=nr((()=>(0,r._)("label",{class:"input-group-text"},"Date",-1))),yr={key:0,style:{"max-width":"fit-content",margin:"auto"},class:"shadow p-3 mb-5 bg-body-tertiary rounded"},br={class:"card",style:{width:"629.67px",padding:"20px"}},vr={class:"card-body",style:{width:"588.08px",padding:"16px"}},wr={class:"shadow p-3 mb-5 bg-body-tertiary rounded"},kr={class:"card-body"},Sr=["onClick"];function Dr(e,t,a,o,i,n){return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",lr,[(0,r._)("div",cr,[(0,r._)("div",dr,[mr,(0,r._)("div",ur,[(0,r._)("div",pr,[(0,r._)("div",hr,[(0,r._)("div",gr,[_r,(0,r.wy)((0,r._)("input",{class:"form-control",type:"City",name:"city",placeholder:"Enter your city name","onUpdate:modelValue":t[0]||(t[0]=e=>i.city=e),required:""},null,512),[[s.nr,i.city]]),fr,(0,r.wy)((0,r._)("input",{class:"form-control",type:"date",name:"date",placeholder:"Enter the date you want tickets for","onUpdate:modelValue":t[1]||(t[1]=e=>i.date=e),required:""},null,512),[[s.nr,i.date]]),(0,r._)("button",{class:"btn btn-secondary",onClick:t[2]||(t[2]=e=>n.fetchBook())},"Fetch")])])])])]),i.theatresAndScreens?((0,r.wg)(),(0,r.iD)("div",yr,[(0,r._)("div",br,[(0,r._)("div",vr,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.theatresAndScreens,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e.theater_id},[(0,r._)("h3",null,(0,c.zw)(e.theater_name)+" ("+(0,c.zw)(e.theatre_city)+")",1),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.screens,(t=>((0,r.wg)(),(0,r.iD)("div",{key:t.screen_id},[(0,r._)("div",wr,[(0,r._)("div",kr,[(0,r._)("p",null," Screen "+(0,c.zw)(t.screen_number)+" Â Â  "+(0,c.zw)(t.start_time)+" - "+(0,c.zw)(t.end_time)+" Â Â  "+(0,c.zw)(t.technology),1),(0,r._)("p",null," Available Capacity: "+(0,c.zw)(t.available_capacity)+" Â Â  Price: "+(0,c.zw)(n.calculatePrice(t.premium))+" â¹ ",1),(0,r._)("button",{class:"btn btn-outline-dark",onClick:a=>n.bookTicket(e.theater_id,t.screen_id,e.theater_name,t.start_time,t.end_time,t.premium,t.screen_number,t.technology,i.date,t.available_capacity)},"Book Tickets",8,Sr)])])])))),128))])))),128))])])])):(0,r.kq)("",!0)])])])}var Tr={data(){return{date:"",city:"",movieid:"",theatresAndScreens:null}},methods:{...(0,T.OI)(["setSelectedTheaterId","setSelectedScreenId","setSelectedTheaterName","setSelectedTheaterTime","setSelectedPrice","setSelectedScreenNo","setSelectedScreenTech","setSelectedDate","setSelectedAvailability"]),selectedTicket(e,t,a,s,r,o,i,n,l){this.setSelectedTheaterId(e),this.setSelectedScreenId(t),this.setSelectedTheaterName(a),this.setSelectedTheaterTime(s),this.setSelectedPrice(r),this.setSelectedScreenNo(o),this.setSelectedScreenTech(i),this.setSelectedDate(n),this.setSelectedAvailability(l)},async fetchBook(){const e=new FormData;e.append("date",this.date),e.append("city",this.city),e.append("movieid",this.$route.params.movieID),console.log(this.$route.params.movieID);try{const t=JSON.parse(localStorage.getItem("userSession")),a=t.token,s=await Y.Z.post(`http://127.0.0.1:5000/api/book-tickets/${this.$route.params.movieID}`,e,{headers:{"Content-Type":"application/JSON",Authorization:`Bearer ${a}`}});alert("Theatre fetched successfully"),console.log(this.response),this.theatresAndScreens=s.data}catch(t){console.log(t.response.data.message),alert(t.response.data.message)}},datecheck(e){const t=new Date(e),a=new Date;return t>=a},bookTicket(e,t,a,s,r,o,i,n,l,c){var d=s+"-"+r,m=this.calculatePrice(o),u=`${this.$route.params.movieID}`;console.log("movie id:",u),this.selectedTicket(e,t,a,d,m,i,n,l,c),this.$router.push({name:"booking",params:{movieid:u}})},calculatePrice(e){console.log(this.$route.query.moviefare),console.log(e),console.log(typeof parseInt(this.$route.query.moviefare,10)),console.log(typeof e);var t=parseInt(this.$route.query.moviefare,10),a=e,s=t+a;return s}}};const Ur=(0,C.Z)(Tr,[["render",Dr],["__scopeId","data-v-39197c74"]]);var Cr=Ur;const xr=e=>((0,r.dD)("data-v-a29f2c9e"),e=e(),(0,r.Cn)(),e),Nr={class:"container"},$r={class:"card booking-card"},zr={class:"row g-0"},Ar={class:"col-md-3"},Ir=["src"],qr={class:"col-md-9"},Or={class:"card"},Vr={class:"card-body"},Mr={class:"card-title"},Jr={class:"card-text"},Pr={key:0,class:"card-text"},Zr={key:1,class:"card-text"},Er={class:"card-text"},Rr={class:"fare-counter"},Br=xr((()=>(0,r._)("label",null,"Number of People:",-1)));function Fr(e,t,a,o,i,n){return(0,r.wg)(),(0,r.iD)("div",Nr,[(0,r._)("div",$r,[(0,r._)("div",zr,[(0,r._)("div",Ar,[(0,r._)("img",{src:`http://127.0.0.1:5000/static/img/Movies/${i.movieBoxart}`,alt:"Movie Boxart",class:"movie-boxart"},null,8,Ir)]),(0,r._)("div",qr,[(0,r._)("div",Or,[(0,r._)("div",Vr,[(0,r._)("h3",Mr,[(0,r._)("strong",null,(0,c.zw)(i.movieTitle),1)]),(0,r._)("p",Jr,(0,c.zw)(i.theaterName),1),"None"==i.technology?((0,r.wg)(),(0,r.iD)("p",Pr,(0,c.zw)(`Screen ${i.screenNumber}`),1)):((0,r.wg)(),(0,r.iD)("p",Zr,(0,c.zw)(`Screen ${i.screenNumber} - ${i.technology}`),1)),(0,r._)("p",Er,(0,c.zw)(`Date: ${i.date} Â   Time: ${i.theaterTime} `),1),(0,r._)("div",Rr,[Br,(0,r.wy)((0,r._)("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=e=>i.numPeople=e)},null,512),[[s.nr,i.numPeople]]),(0,r._)("p",null,(0,c.zw)(`Fare: â¹ ${i.fare}`),1)]),(0,r._)("button",{class:"btn btn-outline-danger btn-book",onClick:t[1]||(t[1]=(...e)=>n.confirmBooking&&n.confirmBooking(...e))},"Book Tickets")])])])])])])}var Lr={data(){return{movieTitle:"",movieBoxart:"",theaterName:"",screenNumber:"",technology:"",theaterTime:"",numPeople:1,fare:0,date:""}},mounted(){this.fetchMovieDetails()},methods:{async fetchMovieDetails(){try{const e=await Y.Z.get(`http://127.0.0.1:5000/api/movie/${this.$route.params.movieid}`),t=e.data;console.log("movie id",this.$route.params.movieid),this.movieTitle=t.title,this.movieBoxart=t.boxart,this.screenNumber=this.$store.getters.selectedScreenNo,this.technology=this.$store.getters.selectedScreenTech,this.fare=this.$store.getters.selectedPrice,this.theaterTime=this.$store.getters.selectedTheaterTime,this.date=this.$store.getters.selectedDate,console.log(this.theaterTime)}catch(e){console.error("Error fetching movie details:",e)}},updateFare(){const e=this.$store.getters.selectedMoviePrice;this.fare=this.numPeople*e},async confirmBooking(){const e={movieId:this.$route.params.movieid,theaterId:this.$store.getters.selectedTheaterId,screenId:this.$store.getters.selectedScreenId,numPeople:this.numPeople,fare:this.fare,time:this.theaterTime,date:this.date,user_id:this.$store.getters.user_id};try{if(this.$store.getters.selectedAvailability>=this.numPeople){const t=JSON.parse(localStorage.getItem("userSession")),a=t.token,s=await Y.Z.post("http://127.0.0.1:5000/api/booking",e,{headers:{"Content-Type":"application/JSON",Authorization:`Bearer ${a}`}});console.log(s),alert("Booking Successful!")}else alert("Not Enough seats available")}catch(t){console.error("Error booking tickets:",t.response.data.message),alert("Booking Failed!")}}},watch:{numPeople(e){const t=this.$store.getters.selectedPrice;this.fare=e*t}}};const jr=(0,C.Z)(Lr,[["render",Fr],["__scopeId","data-v-a29f2c9e"]]);var Hr=jr;const Wr=e=>((0,r.dD)("data-v-30edbab8"),e=e(),(0,r.Cn)(),e),Yr={class:"container mt-5"},Kr=Wr((()=>(0,r._)("h1",{style:{"font-family":"'bluto'",color:"#ffffff"}},"Profile Details",-1))),Gr={class:"shadow p-3 mb-5 bg-body-tertiary rounded",style:{width:"900px",margin:"auto"}},Qr={class:"card"},Xr={class:"card-body"},eo=Wr((()=>(0,r._)("strong",null,"Name:",-1))),to=Wr((()=>(0,r._)("strong",null,"Email:",-1))),ao=Wr((()=>(0,r._)("strong",null,"Role:",-1))),so=Wr((()=>(0,r._)("strong",null,"Date Joined:",-1))),ro={key:0},oo=Wr((()=>(0,r._)("h1",{style:{"font-family":"'bluto'",color:"#ffffff"}},"Bookings",-1))),io={class:"card",style:{width:"900px",margin:"auto"}},no={class:"card-body"},lo={class:"shadow p-3 mb-5 bg-body-tertiary rounded"},co={class:"card"},mo={class:"card-body"},uo={style:{"text-align":"center"}},po=Wr((()=>(0,r._)("strong",null,"Theater Name:",-1))),ho={key:0},go=Wr((()=>(0,r._)("strong",null,"Screen Number:",-1))),_o={key:1},fo=Wr((()=>(0,r._)("strong",null,"Screen Number:",-1))),yo=Wr((()=>(0,r._)("strong",null,"Date:",-1))),bo=Wr((()=>(0,r._)("strong",null,"Time:",-1))),vo=Wr((()=>(0,r._)("strong",null,"Tickets Booked:",-1))),wo=Wr((()=>(0,r._)("strong",null," Â  Amount:",-1))),ko=Wr((()=>(0,r._)("p",null,[(0,r._)("strong",null,"Rate the Movie:")],-1))),So={class:"star-rating-container"};function Do(e,t,a,s,o,i){const n=(0,r.up)("star-rating");return(0,r.wg)(),(0,r.iD)("div",Yr,[Kr,(0,r._)("div",Gr,[(0,r._)("div",Qr,[(0,r._)("div",Xr,[(0,r._)("p",null,[eo,(0,r.Uk)(" "+(0,c.zw)(o.user.user_name),1)]),(0,r._)("p",null,[to,(0,r.Uk)(" "+(0,c.zw)(o.user.user_email),1)]),(0,r._)("p",null,[ao,(0,r.Uk)(" "+(0,c.zw)(this.role),1)]),(0,r._)("p",null,[so,(0,r.Uk)(" "+(0,c.zw)(i.formatDate(o.user.user_date_joined)),1)]),(0,r._)("button",{style:{margin:"5px"},class:"btn btn-primary",onClick:t[0]||(t[0]=e=>i.editUser())},"Edit"),(0,r._)("button",{style:{margin:"5px"},class:"btn btn-danger",onClick:t[1]||(t[1]=e=>i.deleteUser())},"Delete")])])]),o.bookings.length>0?((0,r.wg)(),(0,r.iD)("div",ro,[oo,(0,r._)("div",io,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.bookings,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e.id},[(0,r._)("div",no,[(0,r._)("div",lo,[(0,r._)("div",co,[(0,r._)("div",mo,[(0,r._)("p",uo,[(0,r._)("strong",null,[(0,r._)("h2",null,(0,c.zw)(e.movie_name),1)])]),(0,r._)("p",null,[po,(0,r.Uk)(" "+(0,c.zw)(e.theatre_name)+" "+(0,c.zw)(e.theatre_city),1)]),"None"==e.screen_tech?((0,r.wg)(),(0,r.iD)("p",ho,[go,(0,r.Uk)(" "+(0,c.zw)(e.screen_number),1)])):((0,r.wg)(),(0,r.iD)("p",_o,[fo,(0,r.Uk)(" "+(0,c.zw)(e.screen_number)+" "+(0,c.zw)(e.screen_tech),1)])),(0,r._)("p",null,[yo,(0,r.Uk)(" "+(0,c.zw)(i.formatDate(e.booking_date)),1)]),(0,r._)("p",null,[bo,(0,r.Uk)(" "+(0,c.zw)(e.booking_time),1)]),(0,r._)("p",null,[vo,(0,r.Uk)(" "+(0,c.zw)(e.booked_tickets),1),wo,(0,r.Uk)(" "+(0,c.zw)(e.amount)+"â¹â",1)]),ko,(0,r._)("div",So,[(0,r.Wm)(n,{modelValue:e.rating,"onUpdate:modelValue":t=>e.rating=t,"star-size":20,"read-only":!1,increment:1,rating:e.rating,"onUpdate:rating":i.setRating,onClick:t=>i.submitRating(e)},null,8,["modelValue","onUpdate:modelValue","rating","onUpdate:rating","onClick"])])])])])])])))),128))])])):(0,r.kq)("",!0)])}var To={components:{StarRating:sr()},data(){return{user:{},bookings:[],role:null,Rating:null}},async created(){try{const e=JSON.parse(localStorage.getItem("userSession")),t=e.token,a=this.$store.getters.user_id,s=await Y.Z.get(`http://127.0.0.1:5000/api/user/${a}`,{headers:{"Content-Type":"application/JSON",Authorization:`Bearer ${t}`}});this.user=s.data,this.role=s.data.user_role[0],console.log(this.user);const r=await Y.Z.get(`http://127.0.0.1:5000/api/user/${a}/bookings`,{headers:{"Content-Type":"application/JSON",Authorization:`Bearer ${t}`}});this.bookings=r.data,console.log(this.bookings)}catch(e){console.log(e.response.data.message),console.log(e.bookingsResponse.data.message)}},methods:{...(0,T.OI)(["logout"]),handleLogout(){this.logout(),this.$router.push({name:"register"})},setRating(e){this.Rating=e,console.log(this.Rating)},formatDate(e){const t={year:"numeric",month:"long",day:"numeric"};return new Date(e).toLocaleDateString(void 0,t)},async deleteUser(){try{const e=JSON.parse(localStorage.getItem("userSession")),t=e.token,a=this.$store.getters.user_id,s=window.confirm("Are you sure you want to delete your account?");if(s){const e=await Y.Z.delete(`http://127.0.0.1:5000/api/user/${a}`,{headers:{"Content-Type":"application/JSON",Authorization:`Bearer ${t}`}});console.log(e.data.message),this.handleLogout(),this.$router.push("/")}}catch(e){console.log(e.response.data.message)}},editUser(){const e=this.$store.getters.user_id;this.$router.push(`/edit-profile/${e}`)},async submitRating(e){try{const t=JSON.parse(localStorage.getItem("userSession")),a=t.token;console.log(e.movie_id);const s={user_id:this.$store.getters.user_id,movie_id:e.movie_id,rating:this.Rating},r=await Y.Z.put("http://127.0.0.1:5000/api/add-movie",s,{headers:{"Content-Type":"application/JSON",Authorization:`Bearer ${a}`}});console.log(r.data.message)}catch(t){console.log(t.response.data.message)}}}};const Uo=(0,C.Z)(To,[["render",Do],["__scopeId","data-v-30edbab8"]]);var Co=Uo;const xo=e=>((0,r.dD)("data-v-59b87304"),e=e(),(0,r.Cn)(),e),No={class:"container mt-5"},$o=xo((()=>(0,r._)("h1",{style:{"font-family":"'bluto'",color:"#ffffff"}},"Edit Profile",-1))),zo={class:"shadow p-3 mb-5 bg-body-tertiary rounded",style:{width:"700px",margin:"auto"}},Ao={class:"card"},Io={class:"card-body"},qo={class:"form-group"},Oo=xo((()=>(0,r._)("label",{for:"name"},"Name:",-1))),Vo={class:"form-group"},Mo=xo((()=>(0,r._)("label",{for:"email"},"Email:",-1))),Jo={class:"form-group"},Po=xo((()=>(0,r._)("label",{for:"password"},"New Password:",-1))),Zo={class:"form-group"},Eo=xo((()=>(0,r._)("label",{for:"password2"},"Confirm New Password:",-1))),Ro=xo((()=>(0,r._)("br",null,null,-1))),Bo=xo((()=>(0,r._)("br",null,null,-1))),Fo=xo((()=>(0,r._)("button",{type:"submit",class:"btn btn-primary"},"Update Profile",-1)));function Lo(e,t,a,o,i,n){return(0,r.wg)(),(0,r.iD)("div",No,[$o,(0,r._)("div",zo,[(0,r._)("div",Ao,[(0,r._)("div",Io,[(0,r._)("form",{onSubmit:t[4]||(t[4]=(0,s.iM)(((...e)=>n.updateUser&&n.updateUser(...e)),["prevent"]))},[(0,r._)("div",qo,[Oo,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.name=e),type:"text",class:"form-control",id:"name",required:""},null,512),[[s.nr,i.name]])]),(0,r._)("div",Vo,[Mo,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.email=e),type:"email",class:"form-control",id:"email",required:""},null,512),[[s.nr,i.email]])]),(0,r._)("div",Jo,[Po,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>i.password=e),type:"password",class:"form-control",id:"password"},null,512),[[s.nr,i.password]])]),(0,r._)("div",Zo,[Eo,(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>i.password2=e),type:"password",class:"form-control",id:"password2"},null,512),[[s.nr,i.password2]])]),Ro,Bo,Fo],32)])])])])}var jo={data(){return{name:"",email:"",password:"",password2:""}},async created(){try{const e=JSON.parse(localStorage.getItem("userSession")),t=e.token,a=this.$store.getters.user_id,s=await Y.Z.get(`http://127.0.0.1:5000/api/user/${a}`,{headers:{"Content-Type":"application/JSON",Authorization:`Bearer ${t}`}});this.name=s.data.user_name,this.email=s.data.user_email,console.log(this.name,this.email)}catch(e){console.log(e.response.data.message)}},methods:{async updateUser(){try{const e=JSON.parse(localStorage.getItem("userSession")),t=e.token,a=this.$store.getters.user_id,s={name:this.name,email:this.email,password:this.password,password2:this.password2};await Y.Z.put(`http://127.0.0.1:5000/api/user/${a}`,s,{headers:{"Content-Type":"application/JSON",Authorization:`Bearer ${t}`}}),this.$router.push(`/profile/${a}`),alert("please log out and login for changes to take effect")}catch(e){console.log(e.response.data.message)}}}};const Ho=(0,C.Z)(jo,[["render",Lo],["__scopeId","data-v-59b87304"]]);var Wo=Ho;const Yo=e=>((0,r.dD)("data-v-6ed18d45"),e=e(),(0,r.Cn)(),e),Ko={class:"container mt-5"},Go=Yo((()=>(0,r._)("h2",{class:"mb-4",style:{"font-family":"'bluto'",color:"#ffffff"}},"Edit Theatre",-1))),Qo={class:"card"},Xo={class:"shadow p-3 mb-5 bg-body-tertiary rounded"},ei={class:"card"},ti={class:"card-body",style:{padding:"20px"}},ai={class:"mb-3"},si=Yo((()=>(0,r._)("label",{for:"theatreName",class:"form-label"},"Theatre Name",-1))),ri={class:"mb-3"},oi=Yo((()=>(0,r._)("label",{for:"city",class:"form-label"},"City",-1))),ii={class:"shadow p-3 mb-5 bg-body-tertiary rounded"},ni={class:"card"},li={class:"card-body",style:{padding:"20px"}},ci=Yo((()=>(0,r._)("h4",{class:"mt-4 mb-3"},"Screens",-1))),di={class:"row mb-2"},mi={class:"col"},ui=Yo((()=>(0,r._)("label",{for:"screenNumber",class:"form-label"},"Screen Number",-1))),pi=["onUpdate:modelValue"],hi={class:"col"},gi=Yo((()=>(0,r._)("label",{for:"technology",class:"form-label"},"Technology",-1))),_i=["onUpdate:modelValue"],fi={class:"col"},yi=Yo((()=>(0,r._)("label",{for:"seatCapacity",class:"form-label"},"Seat Capacity",-1))),bi=["onUpdate:modelValue"],vi={class:"col"},wi=Yo((()=>(0,r._)("label",{for:"availableCapacity",class:"form-label"},"Available Capacity",-1))),ki=["onUpdate:modelValue"],Si={class:"col"},Di=Yo((()=>(0,r._)("label",{for:"premium",class:"form-label"},"Premium",-1))),Ti=["onUpdate:modelValue"],Ui={class:"col"},Ci=["onClick"],xi=Yo((()=>(0,r._)("button",{type:"submit",style:{margin:"5px"},class:"btn btn-success mt-3"},"Save Theatre",-1)));function Ni(e,t,a,o,i,n){return(0,r.wg)(),(0,r.iD)("div",Ko,[Go,(0,r._)("form",{onSubmit:t[3]||(t[3]=(0,s.iM)(((...e)=>n.submitForm&&n.submitForm(...e)),["prevent"]))},[(0,r._)("div",Qo,[(0,r._)("div",Xo,[(0,r._)("div",ei,[(0,r._)("div",ti,[(0,r._)("div",ai,[si,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control",id:"theatreName","onUpdate:modelValue":t[0]||(t[0]=e=>i.theatreName=e),required:""},null,512),[[s.nr,i.theatreName]])]),(0,r._)("div",ri,[oi,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control",id:"city","onUpdate:modelValue":t[1]||(t[1]=e=>i.city=e),required:""},null,512),[[s.nr,i.city]])])])])]),(0,r._)("div",ii,[(0,r._)("div",ni,[(0,r._)("div",li,[ci,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.screens,((e,t)=>((0,r.wg)(),(0,r.iD)("div",{key:t},[(0,r._)("div",di,[(0,r._)("div",mi,[ui,(0,r.wy)((0,r._)("input",{type:"number",class:"form-control","onUpdate:modelValue":t=>e.screenNumber=t,required:""},null,8,pi),[[s.nr,e.screenNumber]])]),(0,r._)("div",hi,[gi,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t=>e.technology=t,required:""},null,8,_i),[[s.nr,e.technology]])]),(0,r._)("div",fi,[yi,(0,r.wy)((0,r._)("input",{type:"number",class:"form-control","onUpdate:modelValue":t=>e.seatCapacity=t,required:""},null,8,bi),[[s.nr,e.seatCapacity]])]),(0,r._)("div",vi,[wi,(0,r.wy)((0,r._)("input",{type:"number",class:"form-control","onUpdate:modelValue":t=>e.availableCapacity=t,required:""},null,8,ki),[[s.nr,e.availableCapacity]])]),(0,r._)("div",Si,[Di,(0,r.wy)((0,r._)("input",{type:"number",class:"form-control","onUpdate:modelValue":t=>e.premium=t},null,8,Ti),[[s.nr,e.premium]])]),(0,r._)("div",Ui,[(0,r._)("button",{type:"button",class:"btn btn-danger",onClick:e=>n.removeScreen(t)}," Remove ",8,Ci)])])])))),128)),(0,r._)("button",{type:"button",style:{margin:"5px"},class:"btn btn-primary mt-3",onClick:t[2]||(t[2]=(...e)=>n.addScreen&&n.addScreen(...e))}," Add Screen "),xi])])])])],32)])}var $i={data(){return{theatreName:"",city:"",screens:[{screenNumber:null,technology:"",seatCapacity:null,premium:null}],msg:"",error:!1,success:!1}},created(){const{theaterId:e}=this.$route.params;e&&this.fetchTheaterData(e)},methods:{addScreen(){this.screens.push({screenNumber:null,technology:"",seatCapacity:null,premium:null})},removeScreen(e){this.screens.splice(e,1)},async fetchTheaterData(e){try{const t=JSON.parse(localStorage.getItem("userSession")),a=t.token,s=t.role,r=await Y.Z.get(`http://127.0.0.1:5000/api/theatre/${e}`,{headers:{"Content-Type":"application/JSON",Authorization:`Bearer ${a}`,Role:JSON.stringify(s)}});if(200!==r.status)throw new Error(r.data.message);{console.log(r.data.name),this.theatreName=r.data.name,this.city=r.data.city;const e=r.data.screens.map((e=>({screenid:e.id,screenNumber:e.number,technology:e.technology,seatCapacity:e.seat_capacity,availableCapacity:e.available_capacity,premium:e.premium})));this.screens=e,console.log(this.theatreName,this.city,this.screens)}}catch(t){console.error(t.message)}},async submitForm(){try{const e=JSON.parse(localStorage.getItem("userSession")),t=e.token,a=e.role,{theaterId:s}=this.$route.params,r=await Y.Z.put(`http://127.0.0.1:5000/api/theatre/${s}`,{name:this.theatreName,id:s,city:this.city,screens:this.screens},{headers:{"Content-Type":"application/JSON",Authorization:`Bearer ${t}`,Role:JSON.stringify(a)}});if(!(r.status>=200&&r.status<300))throw this.error=!0,new Error(r.data.error_description);this.success=!0,this.msg=r.data.message,this.screens=[],alert("theatre edited successfully")}catch(e){this.error=!0,this.msg=e.message,console.error(e.message)}}}};const zi=(0,C.Z)($i,[["render",Ni],["__scopeId","data-v-6ed18d45"]]);var Ai=zi;const Ii=e=>((0,r.dD)("data-v-8d1dacc6"),e=e(),(0,r.Cn)(),e),qi={class:"container mt-5"},Oi=Ii((()=>(0,r._)("h2",{class:"mb-4",style:{"font-family":"'bluto'",color:"#ffffff"}},"Edit Movie",-1))),Vi={class:"card",style:{"max-width":"1000px",margin:"auto"}},Mi={class:"card-body"},Ji={class:"shadow p-3 mb-5 bg-body-tertiary rounded"},Pi={class:"card"},Zi={class:"card-body"},Ei={class:"mb-3"},Ri=Ii((()=>(0,r._)("label",{for:"title",class:"form-label"},"Title",-1))),Bi={class:"mb-3"},Fi=Ii((()=>(0,r._)("label",{for:"boxart",class:"form-label"},"Box Art Image",-1))),Li={class:"mb-3"},ji=Ii((()=>(0,r._)("label",{for:"director",class:"form-label"},"Director",-1))),Hi={class:"mb-3"},Wi=Ii((()=>(0,r._)("label",{for:"description",class:"form-label"},"Description",-1))),Yi={class:"mb-3"},Ki=Ii((()=>(0,r._)("label",{for:"cast",class:"form-label"},"Cast",-1))),Gi={class:"mb-3"},Qi=Ii((()=>(0,r._)("label",{for:"duration",class:"form-label"},"Duration",-1))),Xi={class:"mb-3"},en=Ii((()=>(0,r._)("label",{for:"language",class:"form-label"},"Language",-1))),tn={class:"mb-3"},an=Ii((()=>(0,r._)("label",{for:"rate",class:"form-label"},"Base Rate",-1))),sn={class:"mb-3"},rn=Ii((()=>(0,r._)("label",{for:"genre",class:"form-label"},"Genre",-1))),on={class:"mb-3"},nn=Ii((()=>(0,r._)("label",{for:"startDate",class:"form-label"},"Start Date",-1))),ln={class:"mb-3"},cn=Ii((()=>(0,r._)("label",{for:"endDate",class:"form-label"},"End Date",-1))),dn=Ii((()=>(0,r._)("button",{type:"submit",class:"btn btn-primary mt-3"}," Save Changes ",-1)));function mn(e,t,a,o,i,n){return(0,r.wg)(),(0,r.iD)("div",qi,[Oi,(0,r._)("div",Vi,[(0,r._)("div",Mi,[(0,r._)("form",{onSubmit:t[11]||(t[11]=(0,s.iM)(((...e)=>n.submitForm&&n.submitForm(...e)),["prevent"]))},[(0,r._)("div",Ji,[(0,r._)("div",Pi,[(0,r._)("div",Zi,[(0,r._)("div",Ei,[Ri,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":t[0]||(t[0]=e=>i.title=e),required:""},null,512),[[s.nr,i.title]])]),(0,r._)("div",Bi,[Fi,(0,r._)("input",{type:"file",ref:"boxart",onChange:t[1]||(t[1]=(...e)=>n.onFileChange&&n.onFileChange(...e)),accept:"image/*"},null,544)]),(0,r._)("div",Li,[ji,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control",id:"director","onUpdate:modelValue":t[2]||(t[2]=e=>i.director=e),required:""},null,512),[[s.nr,i.director]])]),(0,r._)("div",Hi,[Wi,(0,r.wy)((0,r._)("textarea",{class:"form-control",id:"description","onUpdate:modelValue":t[3]||(t[3]=e=>i.description=e),required:""},null,512),[[s.nr,i.description]])]),(0,r._)("div",Yi,[Ki,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control",id:"cast","onUpdate:modelValue":t[4]||(t[4]=e=>i.cast=e),required:""},null,512),[[s.nr,i.cast]])]),(0,r._)("div",Gi,[Qi,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control",id:"duration","onUpdate:modelValue":t[5]||(t[5]=e=>i.duration=e),required:""},null,512),[[s.nr,i.duration]])]),(0,r._)("div",Xi,[en,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control",id:"language","onUpdate:modelValue":t[6]||(t[6]=e=>i.language=e),required:""},null,512),[[s.nr,i.language]])]),(0,r._)("div",tn,[an,(0,r.wy)((0,r._)("input",{type:"number",class:"form-control",id:"rate","onUpdate:modelValue":t[7]||(t[7]=e=>i.rate=e),required:""},null,512),[[s.nr,i.rate]])]),(0,r._)("div",sn,[rn,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control",id:"genre","onUpdate:modelValue":t[8]||(t[8]=e=>i.genre=e),required:""},null,512),[[s.nr,i.genre]])]),(0,r._)("div",on,[nn,(0,r.wy)((0,r._)("input",{type:"date",class:"form-control","onUpdate:modelValue":t[9]||(t[9]=e=>i.start_date=e)},null,512),[[s.nr,i.start_date]])]),(0,r._)("div",ln,[cn,(0,r.wy)((0,r._)("input",{type:"date",class:"form-control","onUpdate:modelValue":t[10]||(t[10]=e=>i.end_date=e)},null,512),[[s.nr,i.end_date]])]),dn])])])],32)])])])}var un={data(){return{title:"",boxart:null,director:"",description:"",cast:"",duration:"",rate:"",language:"",genre:"",start_date:"",end_date:""}},mounted(){this.fetchMovieDetails()},methods:{onFileChange(e){this.boxart=e.target.files[0]},async fetchMovieDetails(){try{const e=this.$route.params.movieId,t=JSON.parse(localStorage.getItem("userSession")),a=t.token,s=t.role,r=await Y.Z.get(`http://127.0.0.1:5000/api/movie/${e}`,{headers:{"Content-Type":"application/JSON",Authorization:`Bearer ${a}`,Role:JSON.stringify(s)}});this.title=r.data.title,this.director=r.data.director,this.description=r.data.description,this.cast=r.data.cast,this.duration=r.data.duration,this.rate=r.data.rate,this.language=r.data.language,this.genre=r.data.genre,this.start_date=this.formatDate(r.data.start_date),this.end_date=this.formatDate(r.data.end_date),console.log(this.start_date,this.end_date)}catch(e){console.error("Error fetching movie details:",e)}},async submitForm(){const e=new FormData;e.append("title",this.title),e.append("director",this.director),e.append("boxart",this.boxart),e.append("description",this.description),e.append("cast",this.cast),e.append("duration",this.duration),e.append("language",this.language),e.append("rate",this.rate),e.append("genre",this.genre),e.append("start_date",this.start_date),e.append("end_date",this.end_date);try{const t=JSON.parse(localStorage.getItem("userSession")),a=t.token,s=t.role,r=this.$route.params.movieId,o=await Y.Z.put(`http://127.0.0.1:5000/api/movie/${r}`,e,{headers:{Authorization:`Bearer ${a}`,Role:JSON.stringify(s)}});200===o.status?(alert("Movie details updated successfully"),this.$router.push({name:"all-movies"})):alert("Error updating movie details")}catch(t){alert("Error updating movie details:",t.response.data.message)}},formatDate(e){const t={year:"numeric",month:"long",day:"numeric"};return new Date(e).toLocaleDateString(void 0,t)}}};const pn=(0,C.Z)(un,[["render",mn],["__scopeId","data-v-8d1dacc6"]]);var hn=pn;const gn={class:"container mt-5"},_n=(0,r._)("h2",{class:"mb-4",style:{"font-family":"'bluto'",color:"#ffffff"}},"Movie Timings",-1),fn={class:"shadow p-3 mb-5 bg-body-tertiary rounded"},yn={class:"card"},bn={class:"card-body"},vn={class:"table"},wn=(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",null,"ID"),(0,r._)("th",null,"Theatre"),(0,r._)("th",null,"Screen No"),(0,r._)("th",null,"Start Date"),(0,r._)("th",null,"End Date"),(0,r._)("th",null,"Start Time"),(0,r._)("th",null,"End Time"),(0,r._)("th",null,"Action")])],-1),kn=["onUpdate:modelValue"],Sn=["onUpdate:modelValue"],Dn=["onUpdate:modelValue"],Tn=["onUpdate:modelValue"],Un=["onClick"],Cn=["onClick"];function xn(e,t,a,o,i,n){return(0,r.wg)(),(0,r.iD)("div",gn,[_n,(0,r._)("div",fn,[(0,r._)("div",yn,[(0,r._)("div",bn,[(0,r._)("table",vn,[wn,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.movieTimings,((e,t)=>((0,r.wg)(),(0,r.iD)("tr",{key:t},[(0,r._)("td",null,(0,c.zw)(e.id),1),(0,r._)("td",null,(0,c.zw)(e.theatre),1),(0,r._)("td",null,(0,c.zw)(e.screen_no),1),(0,r._)("td",null,[(0,r.wy)((0,r._)("input",{type:"date","onUpdate:modelValue":t=>e.start_date=t,class:"form-control"},null,8,kn),[[s.nr,e.start_date]])]),(0,r._)("td",null,[(0,r.wy)((0,r._)("input",{type:"date","onUpdate:modelValue":t=>e.end_date=t,class:"form-control"},null,8,Sn),[[s.nr,e.end_date]])]),(0,r._)("td",null,[(0,r.wy)((0,r._)("input",{type:"time","onUpdate:modelValue":t=>e.start_time=t,class:"form-control"},null,8,Dn),[[s.nr,e.start_time]])]),(0,r._)("td",null,[(0,r.wy)((0,r._)("input",{type:"time","onUpdate:modelValue":t=>e.end_time=t,class:"form-control"},null,8,Tn),[[s.nr,e.end_time]])]),(0,r._)("td",null,[(0,r._)("button",{class:"btn btn-primary",style:{margin:"5px"},onClick:t=>n.submitTiming(e.id,e.start_date,e.end_date,e.start_time,e.end_time)}," Submit ",8,Un),(0,r._)("button",{class:"btn btn-danger",style:{margin:"5px"},onClick:t=>n.deleteTiming(e.id)}," Delete ",8,Cn)])])))),128))])])])])])])}var Nn={data(){return{movieTimings:[],movieId:null}},mounted(){this.movieId=this.$route.params.movieId,this.fetchMovieTimings()},methods:{async deleteTiming(e){try{const t=JSON.parse(localStorage.getItem("userSession")),a=t.token,s=t.role,r=await Y.Z.delete(`http://127.0.0.1:5000/api/movie/timings/${e}`,{headers:{"Content-Type":"application/JSON",Authorization:`Bearer ${a}`,Role:JSON.stringify(s)}});200===r.status?(alert("Movie timing deleted successfully"),this.$router.push({name:"all-movies"})):alert("Error deleting movie timing")}catch(t){alert("Error deleting movie timing:",t.response.data.message)}},async fetchMovieTimings(){try{const e=JSON.parse(localStorage.getItem("userSession")),t=e.token,a=e.role,s=await Y.Z.get(`http://127.0.0.1:5000/api/movie/${this.movieId}/timings`,{headers:{"Content-Type":"application/JSON",Authorization:`Bearer ${t}`,Role:JSON.stringify(a)}});this.movieTimings=s.data,console.log("this.movieTimings: "+this.movieTimings)}catch(e){console.error("Error fetching movie timings:",e)}},async submitTiming(e,t,a,s,r){try{const o={slot_id:e,start_date:t,end_date:a,start_time:s,end_time:r},i=JSON.parse(localStorage.getItem("userSession")),n=i.token,l=i.role,c=await Y.Z.put(`http://127.0.0.1:5000/api/movie/timings/${e}`,o,{headers:{"Content-Type":"application/JSON",Authorization:`Bearer ${n}`,Role:JSON.stringify(l)}});200===c.status?(alert("Movie timing updated successfully"),console.log(c.data.message)):alert("Error updating movie timing")}catch(o){alert("Error updating movie timing:",o.response.data.message)}}}};const $n=(0,C.Z)(Nn,[["render",xn]]);var zn=$n;const An=e=>((0,r.dD)("data-v-254e9982"),e=e(),(0,r.Cn)(),e),In={class:"container"},qn={class:"shadow p-3 mb-5 bg-body-tertiary rounded"},On={class:"card-body"},Vn={style:{"font-family":"'bluto'"}},Mn={class:"card-text"},Jn={class:"list-group",style:{"font-family":"'bluto'",color:"#333","font-size":"large"}},Pn={class:"mb-0"},Zn={class:"mb-0"},En=An((()=>(0,r._)("strong",null,"Technology:",-1))),Rn={class:"mb-0"},Bn=An((()=>(0,r._)("strong",null,"Seat Capacity:",-1))),Fn={class:"mb-0"},Ln=An((()=>(0,r._)("strong",null,"Premium:",-1))),jn={class:"shadow p-3 mb-5 bg-body-tertiary rounded"},Hn={key:0,class:"card-body",style:{"font-family":"'bluto'",color:"#333","font-size":"large"}},Wn={class:"mb-0"},Yn=An((()=>(0,r._)("strong",null,"Director:",-1))),Kn=An((()=>(0,r._)("strong",null,"Cast:",-1))),Gn={class:"mb-0"},Qn=An((()=>(0,r._)("strong",null,"Duration:",-1))),Xn=An((()=>(0,r._)("strong",null," Language:",-1))),el=An((()=>(0,r._)("strong",null,"Rate:",-1))),tl={key:1,class:"card-body"},al=An((()=>(0,r._)("h2",{style:{"font-family":"'bluto'"}},"This Theatre is not currently screening any movies.",-1))),sl=[al],rl=An((()=>(0,r._)("div",{class:"analysis-graph"},[(0,r._)("canvas",{id:"barplot"})],-1)));function ol(e,t,a,s,o,i){const n=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",In,[(0,r._)("div",qn,[(0,r._)("div",On,[(0,r._)("h2",Vn,[(0,r.Uk)((0,c.zw)(o.theatre.name)+" ("+(0,c.zw)(o.theatre.city)+") Â Â Â Â  ",1),i.adminparts?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"btn btn-dark",onClick:t[0]||(t[0]=e=>i.fetchAnalysisData())},"Statistics")):(0,r.kq)("",!0)]),(0,r._)("p",Mn,[(0,r._)("ul",Jn,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.theatre.screens,(e=>((0,r.wg)(),(0,r.iD)("li",{key:e.id,class:"list-group-item"},[(0,r._)("h6",Pn,[(0,r._)("strong",null,"Screen "+(0,c.zw)(e.number),1)]),(0,r._)("p",Zn,[En,(0,r.Uk)(" "+(0,c.zw)(e.technology),1)]),(0,r._)("p",Rn,[Bn,(0,r.Uk)(" "+(0,c.zw)(e.seat_capacity),1)]),(0,r._)("p",Fn,[Ln,(0,r.Uk)(" "+(0,c.zw)(e.premium),1)])])))),128))])])])]),(0,r._)("div",jn,[o.timeSlots.length>0?((0,r.wg)(),(0,r.iD)("div",Hn,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.timeSlots,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e.id},[(0,r._)("h2",null,[(0,r.Wm)(n,{to:{name:"movie",params:{id:e.movie_id}}},{default:(0,r.w5)((()=>[(0,r.Uk)((0,c.zw)(e.title),1)])),_:2},1032,["to"])]),(0,r._)("p",Wn,[Yn,(0,r.Uk)(" "+(0,c.zw)(e.director)+" Â Â  ",1),Kn,(0,r.Uk)(" "+(0,c.zw)(e.cast),1)]),(0,r._)("p",Gn,[Qn,(0,r.Uk)(" "+(0,c.zw)(e.duration)+"Â Â  ",1),Xn,(0,r.Uk)(" "+(0,c.zw)(e.language)+" Â Â  ",1),el,(0,r.Uk)(" "+(0,c.zw)(e.rate)+"â¹",1)]),(0,r._)("p",null,"Time: "+(0,c.zw)(e.start_time)+" - "+(0,c.zw)(e.end_time),1)])))),128))])):((0,r.wg)(),(0,r.iD)("div",tl,sl))]),rl])}var il={computed:{...(0,T.Se)(["isAuthenticated","role","user_name","user_id"]),adminparts(){return this.isAuthenticated&&"admin"===this.role}},data(){return{theatre:{},timeSlots:{}}},async created(){try{const e=this.$route.params.theatreId,t=await Y.Z.get(`http://127.0.0.1:5000/api/theatre/${e}`);this.theatre=t.data,console.log(this.theatre);const a=await Y.Z.get(`http://127.0.0.1:5000/api/moviefromtheatre/${e}`);this.timeSlots=a.data}catch(e){console.error(e)}},methods:{async fetchAnalysisData(){const e=this.$route.params.theatreId;this.$router.push({name:"theatre_stats",params:{theatreId:e}})}}};const nl=(0,C.Z)(il,[["render",ol],["__scopeId","data-v-254e9982"]]);var ll=nl;const cl=e=>((0,r.dD)("data-v-36634e71"),e=e(),(0,r.Cn)(),e),dl={class:"container mt-5"},ml=cl((()=>(0,r._)("h2",{class:"mb-4",style:{"font-family":"'bluto'",color:"#ffffff"}},"Search",-1))),ul={class:"input-group mb-3"},pl={class:"input-group-append"},hl={class:"row justify-content-center g-2",style:{"font-family":"'bluto'",color:"#ffffff"}},gl={class:"form-check custom-radio"},_l=cl((()=>(0,r._)("label",{class:"form-check-label custom-radio-label",for:"searchMovie"},"Search Movies",-1))),fl={class:"form-check custom-radio",style:{"font-family":"'bluto'",color:"#ffffff"}},yl=cl((()=>(0,r._)("label",{class:"form-check-label custom-radio-label",for:"searchTheatre"},"Search Theatres",-1))),bl={key:0,style:{"font-family":"'bluto'",color:"#ffffff"}},vl={class:"card"},wl=cl((()=>(0,r._)("h4",null,"Search Results:",-1))),kl=["onClick"],Sl={class:"card-body"};function Dl(e,t,a,o,i,n){return(0,r.wg)(),(0,r.iD)("div",dl,[ml,(0,r._)("div",ul,[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.searchQuery=e),class:"form-control",type:"text",placeholder:"Search query"},null,512),[[s.nr,i.searchQuery]]),(0,r._)("div",pl,[(0,r._)("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>n.search&&n.search(...e))},"Search")])]),(0,r._)("div",hl,[(0,r._)("div",gl,[(0,r.wy)((0,r._)("input",{class:"form-check-input",type:"radio",id:"searchMovie",value:"movie","onUpdate:modelValue":t[2]||(t[2]=e=>i.searchType=e)},null,512),[[s.G2,i.searchType]]),_l]),(0,r._)("div",fl,[(0,r.wy)((0,r._)("input",{class:"form-check-input",type:"radio",id:"searchTheatre",value:"theatre","onUpdate:modelValue":t[3]||(t[3]=e=>i.searchType=e)},null,512),[[s.G2,i.searchType]]),yl])]),i.searchResults.length>0?((0,r.wg)(),(0,r.iD)("div",bl,[(0,r._)("div",vl,[wl,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.searchResults,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e.id,onClick:t=>n.navigateToResult(e)},[(0,r._)("div",Sl,[(0,r._)("p",null,(0,c.zw)(e.name||e.title||e.cast)+" - "+(0,c.zw)(e.city||e.director),1)])],8,kl)))),128))])])):(0,r.kq)("",!0)])}var Tl={data(){return{searchQuery:"",searchType:"",searchResults:[]}},methods:{async search(){if(this.searchType)try{const e=await Y.Z.get("http://127.0.0.1:5000/api/search",{params:{type:this.searchType,q:this.searchQuery}});this.searchResults=e.data}catch(e){console.error(e)}else alert("Please select a search type (movie or theatre)")},navigateToResult(e){"movie"===this.searchType?this.$router.push(`/movie/${e.id}`):"theatre"===this.searchType&&this.$router.push(`/theatre/${e.id}`)}}};const Ul=(0,C.Z)(Tl,[["render",Dl],["__scopeId","data-v-36634e71"]]);var Cl=Ul;const xl=["src"];function Nl(e,t,a,s,o,i){return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("img",{src:o.graphImage,alt:"Theatre Statistics Graph"},null,8,xl)])}var $l={data(){return{graphImage:""}},methods:{async fetchTheatreStatistics(e){const t=await Y.Z.get(`http://127.0.0.1:5000/api/theatre-statistics/${e}`);console.log(t.data),this.graphImage="http://127.0.0.1:5000/static/statistics.png"}},mounted(){const e=this.$route.params.theatreId;this.fetchTheatreStatistics(e)}};const zl=(0,C.Z)($l,[["render",Nl]]);var Al=zl;const Il=[{path:"/",name:"home",component:Q},{path:"/login",name:"register",component:Te},{path:"/add-theatre",name:"add-theatre",component:it,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/add-movie",name:"add-movie",component:Pt,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/all-movies",name:"all-movies",component:Sa},{path:"/all-theatres",name:"all-theatres",component:ja},{path:"/add-timings/:movieID",name:"add_timings",component:Us,props:!0,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/movie/:id",name:"movie",component:ir},{path:"/book-tickets/:movieID",name:"book_tickets",component:Cr,props:!0,meta:{requiresAuth:!0}},{path:"/booking/:movieid",name:"booking",component:Hr,props:!0,meta:{requiresAuth:!0}},{path:"/profile/:userid",name:"profile",component:Co,props:!0,meta:{requiresAuth:!0}},{path:"/edit-profile/:userid",name:"edit_user",component:Wo,meta:{requiresAuth:!0}},{path:"/edit-theater/:theaterId",name:"edit_theater",component:Ai,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/edit-movie/:movieId",name:"edit_movie",component:hn,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/edit-timings/:movieId",name:"edit_timings",component:zn,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/theatre/:theatreId",name:"theatre",component:ll},{path:"/search",name:"search",component:Cl},{path:"/theatre-stats/:theatreId",name:"theatre_stats",component:Al,meta:{requiresAuth:!0,requiresAdmin:!0}}],ql=(0,E.p7)({history:(0,E.PO)("/"),routes:Il});ql.beforeEach(((e,t,a)=>{const s=Ne.state.isAuthenticated,r=Ne.state.role;e.meta.requiresAuth&&!s?a({name:"register"}):e.meta.requiresAdmin&&"admin"!==r?a({name:"home"}):a()}));var Ol=ql,Vl=a(5431);(0,Vl.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});let Ml=(0,s.ri)(Z);Ml.use(Ol),Ml.use(Ne),Ml.mount("#app")}},t={};function a(s){var r=t[s];if(void 0!==r)return r.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,s,r,o){if(!s){var i=1/0;for(d=0;d<e.length;d++){s=e[d][0],r=e[d][1],o=e[d][2];for(var n=!0,l=0;l<s.length;l++)(!1&o||i>=o)&&Object.keys(a.O).every((function(e){return a.O[e](s[l])}))?s.splice(l--,1):(n=!1,o<i&&(i=o));if(n){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[s,r,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,o,i=s[0],n=s[1],l=s[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(r in n)a.o(n,r)&&(a.m[r]=n[r]);if(l)var d=l(a)}for(t&&t(s);c<i.length;c++)o=i[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(d)},s=self["webpackChunkticketshow"]=self["webpackChunkticketshow"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(6171)}));s=a.O(s)})();
//# sourceMappingURL=app.05e27678.js.map